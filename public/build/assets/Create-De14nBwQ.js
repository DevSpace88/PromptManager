import{C as j,f as q,g as H,z as Z,r as P,a as G,c as i,o as a,b as p,d as o,u as e,m as K,w as b,P as y,i as r,e as d,l as w,n as V,t as A,q as I,s as $,y as O,x as R,F as J}from"./app-BMtBWTXu.js";import{u as L,_ as Q}from"./vue-flow-core-CuB5rKV4.js";import{v as T,_ as X,a as Y,b as tt}from"./theme-default-DPuSOIjl.js";import ot from"./PromptNode-BzqBb6B_.js";import et from"./ConditionNode-E9oyJtqW.js";import st from"./InputNode-CsT4KcTA.js";import lt from"./OutputNode-CXzjJzti.js";import at from"./ApiNode-CNlinrl_.js";import nt from"./TransformNode-C12sqXLk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const it={class:"breadcrumb push"},dt={class:"content"},rt={class:"row"},ut={class:"col-md-12 mb-4"},pt={class:"block block-rounded"},ft={class:"block-content"},ct={class:"row"},mt={class:"col-md-6"},bt={class:"mb-4"},vt={key:0,class:"invalid-feedback d-block"},kt={class:"col-md-6"},wt={class:"mb-4"},yt={key:0,class:"invalid-feedback d-block"},gt={class:"col-md-12"},Ct={class:"block block-rounded"},_t={class:"block-header block-header-default"},ht={class:"block-options"},Nt=["disabled"],xt={class:"block-content p-0"},Pt={class:"workflow-builder",style:{height:"600px",position:"relative"}},Vt={class:"workflow-sidebar bg-body-light border-end p-3",style:{width:"260px",height:"100%",position:"absolute",left:"0",top:"0","overflow-y":"auto","z-index":"10"}},At={class:"nav nav-tabs nav-tabs-block",role:"tablist"},It={class:"nav-item",role:"presentation"},$t={class:"nav-item",role:"presentation"},Ot={key:0,class:"py-3"},Tt={class:"d-grid gap-2"},Bt={key:1,class:"py-3"},St={class:"form-check form-switch mb-3"},Wt={class:"form-check form-switch"},Dt={style:{"margin-left":"260px",height:"100%"}},Et={class:"d-flex justify-content-between"},Ut=["disabled"],Lt={__name:"Create",props:{prompts:{type:Array,default:()=>[]},apiKeys:{type:Array,default:()=>[]}},setup(zt){const s=j({name:"",description:"",nodes:[],edges:[],settings:{autoSave:!0,notifyOnCompletion:!0}}),B={promptNode:ot,conditionNode:et,inputNode:st,outputNode:lt,apiNode:at,transformNode:nt},{nodes:c,edges:v,addNodes:S,addEdges:W,onConnect:g,onNodesChange:C,onEdgesChange:_}=L(),m=q("nodes"),f=(l,t={})=>{const k={id:`node-${T()}`,type:`${l}Node`,position:{x:250,y:100},data:{...t,label:t.label||`${l.charAt(0).toUpperCase()+l.slice(1)}`,type:l}};return S([k]),k},D=()=>{f("prompt",{label:"Prompt",content:"",prompt_id:null,provider:"openai",model:"gpt-4",temperature:.7,max_tokens:2e3,output_variable:"result"})},E=()=>{f("condition",{label:"Condition",condition:"",true_path:null,false_path:null})},U=()=>{f("input",{label:"Input",variable:"",default_value:""})},z=()=>{f("output",{label:"Output",variables:[]})},F=()=>{f("api",{label:"API Call",url:"",method:"GET",headers:{},body:{},output_variable:"api_result"})},M=()=>{f("transform",{label:"Transform",input_variable:"",output_variable:"",transformation:"json_parse",regex:"",code:""})};g(l=>{W([{id:`edge-${T()}`,source:l.source,target:l.target,animated:!0}])}),C(l=>{s.nodes=c.value.map(t=>({id:t.id,type:t.data.type,position:t.position,data:t.data}))}),_(l=>{s.edges=v.value}),H(()=>{f("input",{label:"Input",variable:"input",default_value:""});const l=f("output",{label:"Output",variables:["result"]});l.position.y=300,s.nodes=c.value.map(t=>({id:t.id,type:t.data.type,position:t.position,data:t.data}))});const h=()=>{s.nodes=c.value.map(l=>({id:l.id,type:l.data.type,position:l.position,data:l.data})),s.edges=v.value,s.post(route("workflows.store"),{onSuccess:()=>{}})},N=Z(()=>s.name.trim()!==""&&c.value.length>0);return(l,t)=>{const x=P("BasePageHeading"),k=P("Panel"),u=G("click-ripple");return a(),i(J,null,[p(e(K),{title:"Create Workflow"}),p(x,{title:"Create Workflow",subtitle:"Build your AI automation flow"},{extra:b(()=>[o("nav",it,[p(e(y),{href:l.route("dashboard"),class:"breadcrumb-item"},{default:b(()=>t[8]||(t[8]=[o("i",{class:"fa fa-home"},null,-1)])),_:1},8,["href"]),p(e(y),{href:l.route("workflows.index"),class:"breadcrumb-item"},{default:b(()=>t[9]||(t[9]=[r(" Workflows ")])),_:1},8,["href"]),t[10]||(t[10]=o("span",{class:"breadcrumb-item active"},"Create",-1))])]),_:1}),o("div",dt,[o("div",rt,[o("div",ut,[o("div",pt,[t[13]||(t[13]=o("div",{class:"block-header block-header-default"},[o("h3",{class:"block-title"},"Workflow Details")],-1)),o("div",ft,[o("div",ct,[o("div",mt,[o("div",bt,[t[11]||(t[11]=o("label",{class:"form-label",for:"workflow-name"},"Workflow Name",-1)),d(o("input",{type:"text",id:"workflow-name",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=n=>e(s).name=n),placeholder:"Enter workflow name",required:""},null,512),[[V,e(s).name]]),e(s).errors.name?(a(),i("div",vt,A(e(s).errors.name),1)):w("",!0)])]),o("div",kt,[o("div",wt,[t[12]||(t[12]=o("label",{class:"form-label",for:"workflow-description"},"Description (optional)",-1)),d(o("textarea",{id:"workflow-description",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=n=>e(s).description=n),placeholder:"Describe what this workflow does",rows:"1"},null,512),[[V,e(s).description]]),e(s).errors.description?(a(),i("div",yt,A(e(s).errors.description),1)):w("",!0)])])])])])]),o("div",gt,[o("div",Ct,[o("div",_t,[t[15]||(t[15]=o("h3",{class:"block-title"},"Workflow Builder",-1)),o("div",ht,[d((a(),i("button",{type:"button",class:"btn btn-sm btn-alt-primary",onClick:h,disabled:!N.value||e(s).processing},t[14]||(t[14]=[o("i",{class:"fa fa-fw fa-save opacity-50 me-1"},null,-1),r(" Save Workflow ")]),8,Nt)),[[u]])])]),o("div",xt,[o("div",Pt,[o("div",Vt,[o("ul",At,[o("li",It,[o("button",{class:I(["nav-link",{active:m.value==="nodes"}]),onClick:t[2]||(t[2]=n=>m.value="nodes")},t[16]||(t[16]=[o("i",{class:"fa fa-cubes me-1"},null,-1),r(" Nodes ")]),2)]),o("li",$t,[o("button",{class:I(["nav-link",{active:m.value==="properties"}]),onClick:t[3]||(t[3]=n=>m.value="properties")},t[17]||(t[17]=[o("i",{class:"fa fa-cog me-1"},null,-1),r(" Properties ")]),2)])]),m.value==="nodes"?(a(),i("div",Ot,[t[24]||(t[24]=o("div",{class:"fs-sm fw-semibold text-uppercase mb-2"},"Add Nodes",-1)),o("div",Tt,[d((a(),i("button",{type:"button",class:"btn btn-alt-primary",onClick:D},t[18]||(t[18]=[o("i",{class:"fa fa-file-alt me-1"},null,-1),r(" Prompt ")]))),[[u]]),d((a(),i("button",{type:"button",class:"btn btn-alt-warning",onClick:E},t[19]||(t[19]=[o("i",{class:"fa fa-code-branch me-1"},null,-1),r(" Condition ")]))),[[u]]),d((a(),i("button",{type:"button",class:"btn btn-alt-info",onClick:U},t[20]||(t[20]=[o("i",{class:"fa fa-sign-in-alt me-1"},null,-1),r(" Input ")]))),[[u]]),d((a(),i("button",{type:"button",class:"btn btn-alt-success",onClick:z},t[21]||(t[21]=[o("i",{class:"fa fa-sign-out-alt me-1"},null,-1),r(" Output ")]))),[[u]]),d((a(),i("button",{type:"button",class:"btn btn-alt-danger",onClick:F},t[22]||(t[22]=[o("i",{class:"fa fa-globe me-1"},null,-1),r(" API Call ")]))),[[u]]),d((a(),i("button",{type:"button",class:"btn btn-alt-secondary",onClick:M},t[23]||(t[23]=[o("i",{class:"fa fa-exchange-alt me-1"},null,-1),r(" Transform ")]))),[[u]])]),t[25]||(t[25]=o("div",{class:"fs-sm fw-semibold text-uppercase mt-4 mb-2"},"Instructions",-1)),t[26]||(t[26]=o("ul",{class:"fs-sm text-muted ps-3"},[o("li",null,"Add nodes to build your workflow"),o("li",null,"Connect nodes by dragging from one node to another"),o("li",null,"Configure nodes by selecting them"),o("li",null,"Input nodes provide variables to your workflow"),o("li",null,"Output nodes define the workflow result")],-1))])):w("",!0),m.value==="properties"?(a(),i("div",Bt,[t[29]||(t[29]=o("div",{class:"alert alert-info d-flex"},[o("div",{class:"flex-shrink-0"},[o("i",{class:"fa fa-info-circle fa-fw"})]),o("div",{class:"ms-2"}," Select a node in the workflow to view and edit its properties ")],-1)),o("div",St,[d(o("input",{class:"form-check-input",type:"checkbox",id:"workflow-autosave","onUpdate:modelValue":t[4]||(t[4]=n=>e(s).settings.autoSave=n)},null,512),[[$,e(s).settings.autoSave]]),t[27]||(t[27]=o("label",{class:"form-check-label",for:"workflow-autosave"}," Auto save workflow on execution ",-1))]),o("div",Wt,[d(o("input",{class:"form-check-input",type:"checkbox",id:"workflow-notify","onUpdate:modelValue":t[5]||(t[5]=n=>e(s).settings.notifyOnCompletion=n)},null,512),[[$,e(s).settings.notifyOnCompletion]]),t[28]||(t[28]=o("label",{class:"form-check-label",for:"workflow-notify"}," Notify on workflow completion ",-1))])])):w("",!0)]),o("div",Dt,[p(e(Q),{modelValue:e(c),"onUpdate:modelValue":t[6]||(t[6]=n=>O(c)?c.value=n:null),edges:e(v),"onUpdate:edges":t[7]||(t[7]=n=>O(v)?v.value=n:null),nodeTypes:B,"default-zoom":1.5,"min-zoom":.2,"max-zoom":4,onNodesChange:e(C),onEdgesChange:e(_),onConnect:e(g),class:"workflow-canvas"},{default:b(()=>[p(e(X),{"pattern-color":"#aaa",gap:"24"}),p(e(Y),{height:"120",width:"240"}),p(e(tt)),p(k,{position:"top-right",class:"p-2"},{default:b(()=>t[30]||(t[30]=[o("div",{class:"btn-group"},[o("button",{type:"button",class:"btn btn-sm btn-alt-secondary",title:"Zoom In",onClick:()=>{}},[o("i",{class:"fa fa-search-plus"})]),o("button",{type:"button",class:"btn btn-sm btn-alt-secondary",title:"Zoom Out",onClick:()=>{}},[o("i",{class:"fa fa-search-minus"})]),o("button",{type:"button",class:"btn btn-sm btn-alt-secondary",title:"Fit View",onClick:()=>{}},[o("i",{class:"fa fa-arrows-alt"})])],-1)])),_:1})]),_:1},8,["modelValue","edges","onNodesChange","onEdgesChange","onConnect"])])])])])])]),o("div",Et,[d((a(),R(e(y),{href:l.route("workflows.index"),class:"btn btn-alt-secondary"},{default:b(()=>t[31]||(t[31]=[o("i",{class:"fa fa-arrow-left opacity-50 me-1"},null,-1),r(" Cancel ")])),_:1},8,["href"])),[[u]]),d((a(),i("button",{type:"button",class:"btn btn-alt-primary",onClick:h,disabled:!N.value||e(s).processing},t[32]||(t[32]=[o("i",{class:"fa fa-save opacity-50 me-1"},null,-1),r(" Save Workflow ")]),8,Ut)),[[u]])])])],64)}}};export{Lt as default};
