import{C as D,f as S,g as U,r as _,c as B,o as W,b as l,d as t,u as e,m as F,w as p,P as C,i,e as b,n as y,y as M,q as m,s as N,F as H}from"./app-BMtBWTXu.js";import{u as j,_ as q}from"./vue-flow-core-CuB5rKV4.js";import{v as h,_ as z,a as G,b as K}from"./theme-default-DPuSOIjl.js";import R from"./PromptNode-BzqBb6B_.js";import J from"./ConditionNode-E9oyJtqW.js";import L from"./InputNode-CsT4KcTA.js";import Q from"./OutputNode-CXzjJzti.js";import X from"./ApiNode-CNlinrl_.js";import Y from"./TransformNode-C12sqXLk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"breadcrumb push"},oo={class:"content"},to={class:"row"},eo={class:"col-md-12 mb-4"},so={class:"block block-rounded"},no={class:"block-content"},ao={class:"row"},lo={class:"col-md-6"},io={class:"mb-4"},ro={class:"col-md-6"},uo={class:"mb-4"},po={class:"col-md-9"},co={class:"block block-rounded"},bo={class:"block-header block-header-default"},mo={class:"block-options"},fo={class:"block-content p-0"},vo={style:{height:"600px",width:"100%"}},ko={class:"d-flex gap-1"},wo={class:"col-md-3"},go={class:"block block-rounded"},_o={class:"block-content"},Co={class:"mb-3"},yo={class:"nav nav-tabs nav-tabs-block",role:"tablist"},No={class:"nav-item",role:"presentation"},ho={class:"nav-item",role:"presentation"},Po={class:"block-content tab-content p-0"},xo={class:"p-2"},$o={class:"form-check mb-2"},Vo={class:"form-check"},Mo={__name:"Create",props:{prompts:{type:Array,default:()=>[]},apiKeys:{type:Array,default:()=>[]}},setup(Ao){const n=D({name:"",description:"",nodes:[],edges:[],settings:{autoSave:!0,notifyOnCompletion:!0}}),P={promptNode:R,conditionNode:J,inputNode:L,outputNode:Q,apiNode:X,transformNode:Y},{nodes:u,edges:f,addNodes:x,addEdges:$,onConnect:v,onNodesChange:k,onEdgesChange:w}=j(),r=S("nodes"),d=(s,o={})=>{const c={id:`node-${h()}`,type:`${s}Node`,position:{x:250,y:100},data:{...o,label:o.label||`${s.charAt(0).toUpperCase()+s.slice(1)}`,type:s}};return x([c]),c},V=()=>{d("prompt",{label:"Prompt",content:"",prompt_id:null,provider:"openai",model:"gpt-4",temperature:.7,max_tokens:2e3,output_variable:"result"})},A=()=>{d("condition",{label:"Condition",condition:"",true_path:null,false_path:null})},E=()=>{d("input",{label:"Input",variable:"",default_value:""})},I=()=>{d("output",{label:"Output",variables:[]})},O=()=>{d("api",{label:"API Call",url:"",method:"GET",headers:{},body:{},output_variable:"api_result"})},T=()=>{d("transform",{label:"Transform",input_variable:"",output_variable:"",transformation:"json_parse",regex:"",code:""})};return v(s=>{$([{id:`edge-${h()}`,source:s.source,target:s.target,animated:!0}])}),k(s=>{n.nodes=u.value.map(o=>({id:o.id,type:o.data.type,position:o.position,data:o.data}))}),w(s=>{n.edges=f.value}),U(()=>{d("input",{label:"Input",variable:"input",default_value:""});const s=d("output",{label:"Output",variables:["result"]});s.position.y=300,n.nodes=u.value.map(o=>({id:o.id,type:o.data.type,position:o.position,data:o.data}))}),(s,o)=>{const g=_("BasePageHeading"),c=_("Panel");return W(),B(H,null,[l(e(F),{title:"Create Workflow"}),l(g,{title:"Create Workflow",subtitle:"Design an AI workflow"},{extra:p(()=>[t("nav",Z,[l(e(C),{href:s.route("dashboard"),class:"breadcrumb-item"},{default:p(()=>o[9]||(o[9]=[t("i",{class:"fa fa-home"},null,-1)])),_:1},8,["href"]),l(e(C),{href:s.route("workflows.index"),class:"breadcrumb-item"},{default:p(()=>o[10]||(o[10]=[i(" Workflows ")])),_:1},8,["href"]),o[11]||(o[11]=t("span",{class:"breadcrumb-item active"},"Create",-1))])]),_:1}),t("div",oo,[t("div",to,[t("div",eo,[t("div",so,[o[14]||(o[14]=t("div",{class:"block-header block-header-default"},[t("h3",{class:"block-title"},"Workflow Details")],-1)),t("div",no,[t("div",ao,[t("div",lo,[t("div",io,[o[12]||(o[12]=t("label",{class:"form-label",for:"workflow-name"},"Name",-1)),b(t("input",{type:"text",class:"form-control",id:"workflow-name","onUpdate:modelValue":o[0]||(o[0]=a=>e(n).name=a),placeholder:"Enter workflow name"},null,512),[[y,e(n).name]])])]),t("div",ro,[t("div",uo,[o[13]||(o[13]=t("label",{class:"form-label",for:"workflow-description"},"Description",-1)),b(t("textarea",{class:"form-control",id:"workflow-description","onUpdate:modelValue":o[1]||(o[1]=a=>e(n).description=a),rows:"1",placeholder:"Enter workflow description"},null,512),[[y,e(n).description]])])])])])])]),t("div",po,[t("div",co,[t("div",bo,[o[16]||(o[16]=t("h3",{class:"block-title"},"Flow Designer",-1)),t("div",mo,[t("button",{type:"button",class:"btn btn-sm btn-alt-primary",onClick:o[2]||(o[2]=a=>e(n).post(s.route("workflows.store")))},o[15]||(o[15]=[t("i",{class:"fa fa-fw fa-save mr-1"},null,-1),i(" Save Workflow ")]))])]),t("div",fo,[t("div",vo,[l(e(q),{modelValue:e(u),"onUpdate:modelValue":o[4]||(o[4]=a=>M(u)?u.value=a:null),edges:e(f),"node-types":P,onConnect:e(v),onNodesChange:e(k),onEdgesChange:e(w)},{default:p(()=>[l(e(z),{"pattern-color":"#aaa",gap:"8"}),l(e(G)),l(e(K)),l(c,{position:"top-right",class:"bg-body-light p-2 rounded shadow-sm"},{default:p(()=>[t("div",ko,[t("button",{type:"button",class:"btn btn-sm btn-alt-primary",onClick:o[3]||(o[3]=a=>e(n).post(s.route("workflows.store")))},o[17]||(o[17]=[t("i",{class:"fa fa-fw fa-save"},null,-1),i(" Save ")]))])]),_:1})]),_:1},8,["modelValue","edges","onConnect","onNodesChange","onEdgesChange"])])])])]),t("div",wo,[t("div",go,[o[26]||(o[26]=t("div",{class:"block-header block-header-default"},[t("h3",{class:"block-title"},"Node Palette")],-1)),t("div",_o,[t("div",Co,[t("ul",yo,[t("li",No,[t("button",{class:m(["nav-link active",{active:r.value==="nodes"}]),onClick:o[5]||(o[5]=a=>r.value="nodes"),role:"tab"},"Nodes",2)]),t("li",ho,[t("button",{class:m(["nav-link",{active:r.value==="settings"}]),onClick:o[6]||(o[6]=a=>r.value="settings"),role:"tab"},"Settings",2)])]),t("div",Po,[t("div",{class:m(["tab-pane active show",{"active show":r.value==="nodes"}]),role:"tabpanel"},[t("div",{class:"d-grid gap-2"},[t("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:E},o[18]||(o[18]=[t("i",{class:"fa fa-fw fa-arrow-right-to-bracket me-1"},null,-1),i(" Input ")])),t("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:V},o[19]||(o[19]=[t("i",{class:"fa fa-fw fa-comment-dots me-1"},null,-1),i(" Prompt ")])),t("button",{type:"button",class:"btn btn-sm btn-outline-warning",onClick:A},o[20]||(o[20]=[t("i",{class:"fa fa-fw fa-code-branch me-1"},null,-1),i(" Condition ")])),t("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:O},o[21]||(o[21]=[t("i",{class:"fa fa-fw fa-cloud me-1"},null,-1),i(" API Call ")])),t("button",{type:"button",class:"btn btn-sm btn-outline-dark",onClick:T},o[22]||(o[22]=[t("i",{class:"fa fa-fw fa-code me-1"},null,-1),i(" Transform ")])),t("button",{type:"button",class:"btn btn-sm btn-outline-success",onClick:I},o[23]||(o[23]=[t("i",{class:"fa fa-fw fa-arrow-right-from-bracket me-1"},null,-1),i(" Output ")]))])],2),t("div",{class:m(["tab-pane",{"active show":r.value==="settings"}]),role:"tabpanel"},[t("div",xo,[t("div",$o,[b(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[7]||(o[7]=a=>e(n).settings.autoSave=a),id:"workflow-auto-save"},null,512),[[N,e(n).settings.autoSave]]),o[24]||(o[24]=t("label",{class:"form-check-label",for:"workflow-auto-save"}," Auto-save workflow ",-1))]),t("div",Vo,[b(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=a=>e(n).settings.notifyOnCompletion=a),id:"workflow-notify"},null,512),[[N,e(n).settings.notifyOnCompletion]]),o[25]||(o[25]=t("label",{class:"form-check-label",for:"workflow-notify"}," Notify on completion ",-1))])])],2)])])])])])])])],64)}}};export{Mo as default};
