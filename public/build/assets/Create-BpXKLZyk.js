import{z as Zt,A as nt,B as mt,c as A,d as x,D as U,f as v,x as Z,l as q,u as C,E as je,G as tn,w as j,F as Kt,e as J,H as yt,I as Tn,J as en,r as nn,K as Bn,t as ce,h as In,q as Lt,L as Dn,M as Vn,N as ze,O as Pn,C as Hn,o as Fn,a as Ee,b as On,m as Ln,P as re,i as Q,g as G,n as Se,s as Ae,Q as Re}from"./app-DVK38B9a.js";import{u as Qt,P as Xn,_ as on,g as Un,a as qn,b as kt,c as Yn}from"./vue-flow-core-5G_7kKqb.js";import Wn from"./PromptNode-14LkX2fT.js";import Gn from"./ConditionNode-B3IsUY6g.js";import Zn from"./InputNode-DvGY76jA.js";import Kn from"./OutputNode-DfXJ4evD.js";import Qn from"./ApiNode-DbqoAFHo.js";import Jn from"./TransformNode-CsmvKJWH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var lt=(t=>(t.Lines="lines",t.Dots="dots",t))(lt||{});const rn=function({dimensions:t,size:e,color:n}){return tn("path",{stroke:n,"stroke-width":e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})},sn=function({radius:t,color:e}){return tn("circle",{cx:t,cy:t,r:t,fill:e})};lt.Lines+"",lt.Dots+"";const jn={[lt.Dots]:"#81818a",[lt.Lines]:"#eee"},ti=["id","x","y","width","height","patternTransform"],ei={key:2,height:"100",width:"100"},ni=["fill"],ii=["x","y","fill"],oi={name:"Background",compatConfig:{MODE:3}},ri=Zt({...oi,props:{id:{},variant:{default:()=>lt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(t){const{id:e,viewport:n}=Qt(),i=nt(()=>{const r=n.value.zoom,[a,l]=Array.isArray(t.gap)?t.gap:[t.gap,t.gap],u=[a*r||1,l*r||1],c=t.size*r,[h,p]=Array.isArray(t.offset)?t.offset:[t.offset,t.offset],w=[h*r||1+u[0]/2,p*r||1+u[1]/2];return{scaledGap:u,offset:w,size:c}}),o=mt(()=>`pattern-${e}${t.id?`-${t.id}`:""}`),s=mt(()=>t.color||t.patternColor||jn[t.variant||lt.Dots]);return(r,a)=>(x(),A("svg",{class:"vue-flow__background vue-flow__container",style:je({height:`${r.height>100?100:r.height}%`,width:`${r.width>100?100:r.width}%`})},[U(r.$slots,"pattern-container",{id:o.value},()=>[v("pattern",{id:o.value,x:C(n).x%i.value.scaledGap[0],y:C(n).y%i.value.scaledGap[1],width:i.value.scaledGap[0],height:i.value.scaledGap[1],patternTransform:`translate(-${i.value.offset[0]},-${i.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[U(r.$slots,"pattern",{},()=>[r.variant===C(lt).Lines?(x(),Z(C(rn),{key:0,size:r.lineWidth,color:s.value,dimensions:i.value.scaledGap},null,8,["size","color","dimensions"])):r.variant===C(lt).Dots?(x(),Z(C(sn),{key:1,color:s.value,radius:i.value.size/2},null,8,["color","radius"])):q("",!0),r.bgColor?(x(),A("svg",ei,[v("rect",{width:"100%",height:"100%",fill:r.bgColor},null,8,ni)])):q("",!0)])],8,ti)]),v("rect",{x:r.x,y:r.y,width:"100%",height:"100%",fill:`url(#${o.value})`},null,8,ii),U(r.$slots,"default",{id:o.value})],4))}}),si={name:"ControlButton",compatConfig:{MODE:3}},ai=(t,e)=>{const n=t.__vccOpts||t;for(const[i,o]of e)n[i]=o;return n},li={class:"vue-flow__controls-button"};function ui(t,e,n,i,o,s){return x(),A("button",li,[U(t.$slots,"default")])}const Tt=ai(si,[["render",ui]]),ci={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fi=v("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),hi=[fi];function di(t,e){return x(),A("svg",ci,hi)}const mi={render:di},pi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},vi=v("path",{d:"M0 0h32v4.2H0z"},null,-1),gi=[vi];function yi(t,e){return x(),A("svg",pi,gi)}const wi={render:yi},_i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},bi=v("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),ki=[bi];function $i(t,e){return x(),A("svg",_i,ki)}const Ci={render:$i},xi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Mi=v("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Ni=[Mi];function zi(t,e){return x(),A("svg",xi,Ni)}const Ei={render:zi},Si={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ai=v("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Ri=[Ai];function Ti(t,e){return x(),A("svg",Si,Ri)}const Bi={render:Ti},Ii={name:"Controls",compatConfig:{MODE:3}},Di=Zt({...Ii,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Xn.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(t,{emit:e}){const{nodesDraggable:n,nodesConnectable:i,elementsSelectable:o,setInteractive:s,zoomIn:r,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:h}=Qt(),p=mt(()=>n.value||i.value||o.value),w=mt(()=>u.value.zoom<=c.value),z=mt(()=>u.value.zoom>=h.value);function S(){r(),e("zoomIn")}function R(){a(),e("zoomOut")}function $(){l(t.fitViewParams),e("fitView")}function V(){s(!p.value),e("interactionChange",!p.value)}return(N,E)=>(x(),Z(C(on),{class:"vue-flow__controls",position:N.position},{default:j(()=>[U(N.$slots,"top"),N.showZoom?(x(),A(Kt,{key:0},[U(N.$slots,"control-zoom-in",{},()=>[J(Tt,{class:"vue-flow__controls-zoomin",disabled:z.value,onClick:S},{default:j(()=>[U(N.$slots,"icon-zoom-in",{},()=>[(x(),Z(yt(C(mi))))])]),_:3},8,["disabled"])]),U(N.$slots,"control-zoom-out",{},()=>[J(Tt,{class:"vue-flow__controls-zoomout",disabled:w.value,onClick:R},{default:j(()=>[U(N.$slots,"icon-zoom-out",{},()=>[(x(),Z(yt(C(wi))))])]),_:3},8,["disabled"])])],64)):q("",!0),N.showFitView?U(N.$slots,"control-fit-view",{key:1},()=>[J(Tt,{class:"vue-flow__controls-fitview",onClick:$},{default:j(()=>[U(N.$slots,"icon-fit-view",{},()=>[(x(),Z(yt(C(Ci))))])]),_:3})]):q("",!0),N.showInteractive?U(N.$slots,"control-interactive",{key:2},()=>[N.showInteractive?(x(),Z(Tt,{key:0,class:"vue-flow__controls-interactive",onClick:V},{default:j(()=>[p.value?U(N.$slots,"icon-unlock",{key:0},()=>[(x(),Z(yt(C(Bi))))]):q("",!0),p.value?q("",!0):U(N.$slots,"icon-lock",{key:1},()=>[(x(),Z(yt(C(Ei))))])]),_:3})):q("",!0)]):q("",!0),U(N.$slots,"default")]),_:3},8,["position"]))}});var Vi={value:()=>{}};function _e(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Pt(n)}function Pt(t){this._=t}function Pi(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Pt.prototype=_e.prototype={constructor:Pt,on:function(t,e){var n=this._,i=Pi(t+"",n),o,s=-1,r=i.length;if(arguments.length<2){for(;++s<r;)if((o=(t=i[s]).type)&&(o=Hi(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<r;)if(o=(t=i[s]).type)n[o]=Te(n[o],t.name,e);else if(e==null)for(o in n)n[o]=Te(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Pt(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,s;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,o=s.length;i<o;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,s=i.length;o<s;++o)i[o].value.apply(e,n)}};function Hi(t,e){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===e)return o.value}function Te(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=Vi,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var fe="http://www.w3.org/1999/xhtml";const Be={svg:"http://www.w3.org/2000/svg",xhtml:fe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Be.hasOwnProperty(e)?{space:Be[e],local:t}:t}function Fi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===fe&&e.documentElement.namespaceURI===fe?e.createElement(t):e.createElementNS(n,t)}}function Oi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function an(t){var e=Jt(t);return(e.local?Oi:Fi)(e)}function Li(){}function be(t){return t==null?Li:function(){return this.querySelector(t)}}function Xi(t){typeof t!="function"&&(t=be(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var s=e[o],r=s.length,a=i[o]=new Array(r),l,u,c=0;c<r;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new K(i,this._parents)}function Ui(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function qi(){return[]}function ln(t){return t==null?qi:function(){return this.querySelectorAll(t)}}function Yi(t){return function(){return Ui(t.apply(this,arguments))}}function Wi(t){typeof t=="function"?t=Yi(t):t=ln(t);for(var e=this._groups,n=e.length,i=[],o=[],s=0;s<n;++s)for(var r=e[s],a=r.length,l,u=0;u<a;++u)(l=r[u])&&(i.push(t.call(l,l.__data__,u,r)),o.push(l));return new K(i,o)}function un(t){return function(){return this.matches(t)}}function cn(t){return function(e){return e.matches(t)}}var Gi=Array.prototype.find;function Zi(t){return function(){return Gi.call(this.children,t)}}function Ki(){return this.firstElementChild}function Qi(t){return this.select(t==null?Ki:Zi(typeof t=="function"?t:cn(t)))}var Ji=Array.prototype.filter;function ji(){return Array.from(this.children)}function to(t){return function(){return Ji.call(this.children,t)}}function eo(t){return this.selectAll(t==null?ji:to(typeof t=="function"?t:cn(t)))}function no(t){typeof t!="function"&&(t=un(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var s=e[o],r=s.length,a=i[o]=[],l,u=0;u<r;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new K(i,this._parents)}function fn(t){return new Array(t.length)}function io(){return new K(this._enter||this._groups.map(fn),this._parents)}function Xt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Xt.prototype={constructor:Xt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function oo(t){return function(){return t}}function ro(t,e,n,i,o,s){for(var r=0,a,l=e.length,u=s.length;r<u;++r)(a=e[r])?(a.__data__=s[r],i[r]=a):n[r]=new Xt(t,s[r]);for(;r<l;++r)(a=e[r])&&(o[r]=a)}function so(t,e,n,i,o,s,r){var a,l,u=new Map,c=e.length,h=s.length,p=new Array(c),w;for(a=0;a<c;++a)(l=e[a])&&(p[a]=w=r.call(l,l.__data__,a,e)+"",u.has(w)?o[a]=l:u.set(w,l));for(a=0;a<h;++a)w=r.call(t,s[a],a,s)+"",(l=u.get(w))?(i[a]=l,l.__data__=s[a],u.delete(w)):n[a]=new Xt(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(p[a])===l&&(o[a]=l)}function ao(t){return t.__data__}function lo(t,e){if(!arguments.length)return Array.from(this,ao);var n=e?so:ro,i=this._parents,o=this._groups;typeof t!="function"&&(t=oo(t));for(var s=o.length,r=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=i[u],h=o[u],p=h.length,w=uo(t.call(c,c&&c.__data__,u,i)),z=w.length,S=a[u]=new Array(z),R=r[u]=new Array(z),$=l[u]=new Array(p);n(c,h,S,R,$,w,e);for(var V=0,N=0,E,d;V<z;++V)if(E=S[V]){for(V>=N&&(N=V+1);!(d=R[N])&&++N<z;);E._next=d||null}}return r=new K(r,i),r._enter=a,r._exit=l,r}function uo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function co(){return new K(this._exit||this._groups.map(fn),this._parents)}function fo(t,e,n){var i=this.enter(),o=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?s.remove():n(s),i&&o?i.merge(o).order():o}function ho(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,s=i.length,r=Math.min(o,s),a=new Array(o),l=0;l<r;++l)for(var u=n[l],c=i[l],h=u.length,p=a[l]=new Array(h),w,z=0;z<h;++z)(w=u[z]||c[z])&&(p[z]=w);for(;l<o;++l)a[l]=n[l];return new K(a,this._parents)}function mo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],o=i.length-1,s=i[o],r;--o>=0;)(r=i[o])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function po(t){t||(t=vo);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var n=this._groups,i=n.length,o=new Array(i),s=0;s<i;++s){for(var r=n[s],a=r.length,l=o[s]=new Array(a),u,c=0;c<a;++c)(u=r[c])&&(l[c]=u);l.sort(e)}return new K(o,this._parents).order()}function vo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function go(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function yo(){return Array.from(this)}function wo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,s=i.length;o<s;++o){var r=i[o];if(r)return r}return null}function _o(){let t=0;for(const e of this)++t;return t}function bo(){return!this.node()}function ko(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o=e[n],s=0,r=o.length,a;s<r;++s)(a=o[s])&&t.call(a,a.__data__,s,o);return this}function $o(t){return function(){this.removeAttribute(t)}}function Co(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xo(t,e){return function(){this.setAttribute(t,e)}}function Mo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function No(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Eo(t,e){var n=Jt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Co:$o:typeof e=="function"?n.local?zo:No:n.local?Mo:xo)(n,e))}function hn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function So(t){return function(){this.style.removeProperty(t)}}function Ao(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ro(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function To(t,e,n){return arguments.length>1?this.each((e==null?So:typeof e=="function"?Ro:Ao)(t,e,n??"")):_t(this.node(),t)}function _t(t,e){return t.style.getPropertyValue(e)||hn(t).getComputedStyle(t,null).getPropertyValue(e)}function Bo(t){return function(){delete this[t]}}function Io(t,e){return function(){this[t]=e}}function Do(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Vo(t,e){return arguments.length>1?this.each((e==null?Bo:typeof e=="function"?Do:Io)(t,e)):this.node()[t]}function dn(t){return t.trim().split(/^|\s+/)}function ke(t){return t.classList||new mn(t)}function mn(t){this._node=t,this._names=dn(t.getAttribute("class")||"")}mn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pn(t,e){for(var n=ke(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function vn(t,e){for(var n=ke(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function Po(t){return function(){pn(this,t)}}function Ho(t){return function(){vn(this,t)}}function Fo(t,e){return function(){(e.apply(this,arguments)?pn:vn)(this,t)}}function Oo(t,e){var n=dn(t+"");if(arguments.length<2){for(var i=ke(this.node()),o=-1,s=n.length;++o<s;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?Fo:e?Po:Ho)(n,e))}function Lo(){this.textContent=""}function Xo(t){return function(){this.textContent=t}}function Uo(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function qo(t){return arguments.length?this.each(t==null?Lo:(typeof t=="function"?Uo:Xo)(t)):this.node().textContent}function Yo(){this.innerHTML=""}function Wo(t){return function(){this.innerHTML=t}}function Go(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Zo(t){return arguments.length?this.each(t==null?Yo:(typeof t=="function"?Go:Wo)(t)):this.node().innerHTML}function Ko(){this.nextSibling&&this.parentNode.appendChild(this)}function Qo(){return this.each(Ko)}function Jo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jo(){return this.each(Jo)}function tr(t){var e=typeof t=="function"?t:an(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function er(){return null}function nr(t,e){var n=typeof t=="function"?t:an(t),i=e==null?er:typeof e=="function"?e:be(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function ir(){var t=this.parentNode;t&&t.removeChild(this)}function or(){return this.each(ir)}function rr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ar(t){return this.select(t?sr:rr)}function lr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ur(t){return function(e){t.call(this,e,this.__data__)}}function cr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function fr(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,o=e.length,s;n<o;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function hr(t,e,n){return function(){var i=this.__on,o,s=ur(e);if(i){for(var r=0,a=i.length;r<a;++r)if((o=i[r]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=e;return}}this.addEventListener(t.type,s,n),o={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(o):this.__on=[o]}}function dr(t,e,n){var i=cr(t+""),o,s=i.length,r;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(o=0,c=a[l];o<s;++o)if((r=i[o]).type===c.type&&r.name===c.name)return c.value}return}for(a=e?hr:fr,o=0;o<s;++o)this.each(a(i[o],e,n));return this}function gn(t,e,n){var i=hn(t),o=i.CustomEvent;typeof o=="function"?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function mr(t,e){return function(){return gn(this,t,e)}}function pr(t,e){return function(){return gn(this,t,e.apply(this,arguments))}}function vr(t,e){return this.each((typeof e=="function"?pr:mr)(t,e))}function*gr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,s=i.length,r;o<s;++o)(r=i[o])&&(yield r)}var yn=[null];function K(t,e){this._groups=t,this._parents=e}function At(){return new K([[document.documentElement]],yn)}function yr(){return this}K.prototype=At.prototype={constructor:K,select:Xi,selectAll:Wi,selectChild:Qi,selectChildren:eo,filter:no,data:lo,enter:io,exit:co,join:fo,merge:ho,selection:yr,order:mo,sort:po,call:go,nodes:yo,node:wo,size:_o,empty:bo,each:ko,attr:Eo,style:To,property:Vo,classed:Oo,text:qo,html:Zo,raise:Qo,lower:jo,append:tr,insert:nr,remove:or,clone:ar,datum:lr,on:dr,dispatch:vr,[Symbol.iterator]:gr};function dt(t){return typeof t=="string"?new K([[document.querySelector(t)]],[document.documentElement]):new K([[t]],yn)}function wr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ft(t,e){if(t=wr(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const he={capture:!0,passive:!1};function de(t){t.preventDefault(),t.stopImmediatePropagation()}function _r(t){var e=t.document.documentElement,n=dt(t).on("dragstart.drag",de,he);"onselectstart"in e?n.on("selectstart.drag",de,he):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function br(t,e){var n=t.document.documentElement,i=dt(t).on("dragstart.drag",null);e&&(i.on("click.drag",de,he),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function $e(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wn(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Rt(){}var Nt=.7,Ut=1/Nt,wt="\\s*([+-]?\\d+)\\s*",zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kr=/^#([0-9a-f]{3,8})$/,$r=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),Cr=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),xr=new RegExp(`^rgba\\(${wt},${wt},${wt},${zt}\\)$`),Mr=new RegExp(`^rgba\\(${rt},${rt},${rt},${zt}\\)$`),Nr=new RegExp(`^hsl\\(${zt},${rt},${rt}\\)$`),zr=new RegExp(`^hsla\\(${zt},${rt},${rt},${zt}\\)$`),Ie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$e(Rt,Et,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:De,formatHex:De,formatHex8:Er,formatHsl:Sr,formatRgb:Ve,toString:Ve});function De(){return this.rgb().formatHex()}function Er(){return this.rgb().formatHex8()}function Sr(){return _n(this).formatHsl()}function Ve(){return this.rgb().formatRgb()}function Et(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=kr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Pe(e):n===3?new Y(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$r.exec(t))?new Y(e[1],e[2],e[3],1):(e=Cr.exec(t))?new Y(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xr.exec(t))?Bt(e[1],e[2],e[3],e[4]):(e=Mr.exec(t))?Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nr.exec(t))?Oe(e[1],e[2]/100,e[3]/100,1):(e=zr.exec(t))?Oe(e[1],e[2]/100,e[3]/100,e[4]):Ie.hasOwnProperty(t)?Pe(Ie[t]):t==="transparent"?new Y(NaN,NaN,NaN,0):null}function Pe(t){return new Y(t>>16&255,t>>8&255,t&255,1)}function Bt(t,e,n,i){return i<=0&&(t=e=n=NaN),new Y(t,e,n,i)}function Ar(t){return t instanceof Rt||(t=Et(t)),t?(t=t.rgb(),new Y(t.r,t.g,t.b,t.opacity)):new Y}function me(t,e,n,i){return arguments.length===1?Ar(t):new Y(t,e,n,i??1)}function Y(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}$e(Y,me,wn(Rt,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new Y(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Nt:Math.pow(Nt,t),new Y(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Y(vt(this.r),vt(this.g),vt(this.b),qt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:He,formatHex:He,formatHex8:Rr,formatRgb:Fe,toString:Fe}));function He(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function Rr(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fe(){const t=qt(this.opacity);return`${t===1?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${t===1?")":`, ${t})`}`}function qt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pt(t){return t=vt(t),(t<16?"0":"")+t.toString(16)}function Oe(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new it(t,e,n,i)}function _n(t){if(t instanceof it)return new it(t.h,t.s,t.l,t.opacity);if(t instanceof Rt||(t=Et(t)),!t)return new it;if(t instanceof it)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),s=Math.max(e,n,i),r=NaN,a=s-o,l=(s+o)/2;return a?(e===s?r=(n-i)/a+(n<i)*6:n===s?r=(i-e)/a+2:r=(e-n)/a+4,a/=l<.5?s+o:2-s-o,r*=60):a=l>0&&l<1?0:r,new it(r,a,l,t.opacity)}function Tr(t,e,n,i){return arguments.length===1?_n(t):new it(t,e,n,i??1)}function it(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}$e(it,Tr,wn(Rt,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new it(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Nt:Math.pow(Nt,t),new it(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Y(se(t>=240?t-240:t+120,o,i),se(t,o,i),se(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new it(Le(this.h),It(this.s),It(this.l),qt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qt(this.opacity);return`${t===1?"hsl(":"hsla("}${Le(this.h)}, ${It(this.s)*100}%, ${It(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Le(t){return t=(t||0)%360,t<0?t+360:t}function It(t){return Math.max(0,Math.min(1,t||0))}function se(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const bn=t=>()=>t;function Br(t,e){return function(n){return t+n*e}}function Ir(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Dr(t){return(t=+t)==1?kn:function(e,n){return n-e?Ir(e,n,t):bn(isNaN(e)?n:e)}}function kn(t,e){var n=e-t;return n?Br(t,n):bn(isNaN(t)?e:t)}const Xe=function t(e){var n=Dr(e);function i(o,s){var r=n((o=me(o)).r,(s=me(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),u=kn(o.opacity,s.opacity);return function(c){return o.r=r(c),o.g=a(c),o.b=l(c),o.opacity=u(c),o+""}}return i.gamma=t,i}(1);function ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var pe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ae=new RegExp(pe.source,"g");function Vr(t){return function(){return t}}function Pr(t){return function(e){return t(e)+""}}function Hr(t,e){var n=pe.lastIndex=ae.lastIndex=0,i,o,s,r=-1,a=[],l=[];for(t=t+"",e=e+"";(i=pe.exec(t))&&(o=ae.exec(e));)(s=o.index)>n&&(s=e.slice(n,s),a[r]?a[r]+=s:a[++r]=s),(i=i[0])===(o=o[0])?a[r]?a[r]+=o:a[++r]=o:(a[++r]=null,l.push({i:r,x:ht(i,o)})),n=ae.lastIndex;return n<e.length&&(s=e.slice(n),a[r]?a[r]+=s:a[++r]=s),a.length<2?l[0]?Pr(l[0].x):Vr(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var Ue=180/Math.PI,ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $n(t,e,n,i,o,s){var r,a,l;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,r=-r),{translateX:o,translateY:s,rotate:Math.atan2(e,t)*Ue,skewX:Math.atan(l)*Ue,scaleX:r,scaleY:a}}var Dt;function Fr(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ve:$n(e.a,e.b,e.c,e.d,e.e,e.f)}function Or(t){return t==null||(Dt||(Dt=document.createElementNS("http://www.w3.org/2000/svg","g")),Dt.setAttribute("transform",t),!(t=Dt.transform.baseVal.consolidate()))?ve:(t=t.matrix,$n(t.a,t.b,t.c,t.d,t.e,t.f))}function Cn(t,e,n,i){function o(u){return u.length?u.pop()+" ":""}function s(u,c,h,p,w,z){if(u!==h||c!==p){var S=w.push("translate(",null,e,null,n);z.push({i:S-4,x:ht(u,h)},{i:S-2,x:ht(c,p)})}else(h||p)&&w.push("translate("+h+e+p+n)}function r(u,c,h,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:h.push(o(h)+"rotate(",null,i)-2,x:ht(u,c)})):c&&h.push(o(h)+"rotate("+c+i)}function a(u,c,h,p){u!==c?p.push({i:h.push(o(h)+"skewX(",null,i)-2,x:ht(u,c)}):c&&h.push(o(h)+"skewX("+c+i)}function l(u,c,h,p,w,z){if(u!==h||c!==p){var S=w.push(o(w)+"scale(",null,",",null,")");z.push({i:S-4,x:ht(u,h)},{i:S-2,x:ht(c,p)})}else(h!==1||p!==1)&&w.push(o(w)+"scale("+h+","+p+")")}return function(u,c){var h=[],p=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,p),r(u.rotate,c.rotate,h,p),a(u.skewX,c.skewX,h,p),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,p),u=c=null,function(w){for(var z=-1,S=p.length,R;++z<S;)h[(R=p[z]).i]=R.x(w);return h.join("")}}}var Lr=Cn(Fr,"px, ","px)","deg)"),Xr=Cn(Or,", ",")",")"),Ur=1e-12;function qe(t){return((t=Math.exp(t))+1/t)/2}function qr(t){return((t=Math.exp(t))-1/t)/2}function Yr(t){return((t=Math.exp(2*t))-1)/(t+1)}const Wr=function t(e,n,i){function o(s,r){var a=s[0],l=s[1],u=s[2],c=r[0],h=r[1],p=r[2],w=c-a,z=h-l,S=w*w+z*z,R,$;if(S<Ur)$=Math.log(p/u)/e,R=function(I){return[a+I*w,l+I*z,u*Math.exp(e*I*$)]};else{var V=Math.sqrt(S),N=(p*p-u*u+i*S)/(2*u*n*V),E=(p*p-u*u-i*S)/(2*p*n*V),d=Math.log(Math.sqrt(N*N+1)-N),L=Math.log(Math.sqrt(E*E+1)-E);$=(L-d)/e,R=function(I){var P=I*$,T=qe(d),H=u/(n*V)*(T*Yr(e*P+d)-qr(d));return[a+H*w,l+H*z,u*T/qe(e*P+d)]}}return R.duration=$*1e3*e/Math.SQRT2,R}return o.rho=function(s){var r=Math.max(.001,+s),a=r*r,l=a*a;return t(r,a,l)},o}(Math.SQRT2,2,4);var bt=0,xt=0,$t=0,xn=1e3,Yt,Mt,Wt=0,gt=0,jt=0,St=typeof performance=="object"&&performance.now?performance:Date,Mn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ce(){return gt||(Mn(Gr),gt=St.now()+jt)}function Gr(){gt=0}function Gt(){this._call=this._time=this._next=null}Gt.prototype=Nn.prototype={constructor:Gt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ce():+n)+(e==null?0:+e),!this._next&&Mt!==this&&(Mt?Mt._next=this:Yt=this,Mt=this),this._call=t,this._time=n,ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,ge())}};function Nn(t,e,n){var i=new Gt;return i.restart(t,e,n),i}function Zr(){Ce(),++bt;for(var t=Yt,e;t;)(e=gt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--bt}function Ye(){gt=(Wt=St.now())+jt,bt=xt=0;try{Zr()}finally{bt=0,Qr(),gt=0}}function Kr(){var t=St.now(),e=t-Wt;e>xn&&(jt-=e,Wt=t)}function Qr(){for(var t,e=Yt,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yt=n);Mt=t,ge(i)}function ge(t){if(!bt){xt&&(xt=clearTimeout(xt));var e=t-gt;e>24?(t<1/0&&(xt=setTimeout(Ye,t-St.now()-jt)),$t&&($t=clearInterval($t))):($t||(Wt=St.now(),$t=setInterval(Kr,xn)),bt=1,Mn(Ye))}}function We(t,e,n){var i=new Gt;return e=e==null?0:+e,i.restart(o=>{i.stop(),t(o+e)},e,n),i}var Jr=_e("start","end","cancel","interrupt"),jr=[],zn=0,Ge=1,ye=2,Ht=3,Ze=4,we=5,Ft=6;function te(t,e,n,i,o,s){var r=t.__transition;if(!r)t.__transition={};else if(n in r)return;ts(t,n,{name:e,index:i,group:o,on:Jr,tween:jr,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zn})}function xe(t,e){var n=ot(t,e);if(n.state>zn)throw new Error("too late; already scheduled");return n}function st(t,e){var n=ot(t,e);if(n.state>Ht)throw new Error("too late; already running");return n}function ot(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ts(t,e,n){var i=t.__transition,o;i[e]=n,n.timer=Nn(s,0,n.time);function s(u){n.state=Ge,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,h,p,w;if(n.state!==Ge)return l();for(c in i)if(w=i[c],w.name===n.name){if(w.state===Ht)return We(r);w.state===Ze?(w.state=Ft,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[c]):+c<e&&(w.state=Ft,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[c])}if(We(function(){n.state===Ht&&(n.state=Ze,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ye,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ye){for(n.state=Ht,o=new Array(p=n.tween.length),c=0,h=-1;c<p;++c)(w=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(o[++h]=w);o.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=we,1),h=-1,p=o.length;++h<p;)o[h].call(t,c);n.state===we&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Ft,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Ot(t,e){var n=t.__transition,i,o,s=!0,r;if(n){e=e==null?null:e+"";for(r in n){if((i=n[r]).name!==e){s=!1;continue}o=i.state>ye&&i.state<we,i.state=Ft,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[r]}s&&delete t.__transition}}function es(t){return this.each(function(){Ot(this,t)})}function ns(t,e){var n,i;return function(){var o=st(this,t),s=o.tween;if(s!==n){i=n=s;for(var r=0,a=i.length;r<a;++r)if(i[r].name===e){i=i.slice(),i.splice(r,1);break}}o.tween=i}}function is(t,e,n){var i,o;if(typeof n!="function")throw new Error;return function(){var s=st(this,t),r=s.tween;if(r!==i){o=(i=r).slice();for(var a={name:e,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===e){o[l]=a;break}l===u&&o.push(a)}s.tween=o}}function os(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ot(this.node(),n).tween,o=0,s=i.length,r;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((e==null?ns:is)(n,t,e))}function Me(t,e,n){var i=t._id;return t.each(function(){var o=st(this,i);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return ot(o,i).value[e]}}function En(t,e){var n;return(typeof e=="number"?ht:e instanceof Et?Xe:(n=Et(e))?(e=n,Xe):Hr)(t,e)}function rs(t){return function(){this.removeAttribute(t)}}function ss(t){return function(){this.removeAttributeNS(t.space,t.local)}}function as(t,e,n){var i,o=n+"",s;return function(){var r=this.getAttribute(t);return r===o?null:r===i?s:s=e(i=r,n)}}function ls(t,e,n){var i,o=n+"",s;return function(){var r=this.getAttributeNS(t.space,t.local);return r===o?null:r===i?s:s=e(i=r,n)}}function us(t,e,n){var i,o,s;return function(){var r,a=n(this),l;return a==null?void this.removeAttribute(t):(r=this.getAttribute(t),l=a+"",r===l?null:r===i&&l===o?s:(o=l,s=e(i=r,a)))}}function cs(t,e,n){var i,o,s;return function(){var r,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(r=this.getAttributeNS(t.space,t.local),l=a+"",r===l?null:r===i&&l===o?s:(o=l,s=e(i=r,a)))}}function fs(t,e){var n=Jt(t),i=n==="transform"?Xr:En;return this.attrTween(t,typeof e=="function"?(n.local?cs:us)(n,i,Me(this,"attr."+t,e)):e==null?(n.local?ss:rs)(n):(n.local?ls:as)(n,i,e))}function hs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ds(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ms(t,e){var n,i;function o(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&ds(t,s)),n}return o._value=e,o}function ps(t,e){var n,i;function o(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&hs(t,s)),n}return o._value=e,o}function vs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Jt(t);return this.tween(n,(i.local?ms:ps)(i,e))}function gs(t,e){return function(){xe(this,t).delay=+e.apply(this,arguments)}}function ys(t,e){return e=+e,function(){xe(this,t).delay=e}}function ws(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gs:ys)(e,t)):ot(this.node(),e).delay}function _s(t,e){return function(){st(this,t).duration=+e.apply(this,arguments)}}function bs(t,e){return e=+e,function(){st(this,t).duration=e}}function ks(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_s:bs)(e,t)):ot(this.node(),e).duration}function $s(t,e){if(typeof e!="function")throw new Error;return function(){st(this,t).ease=e}}function Cs(t){var e=this._id;return arguments.length?this.each($s(e,t)):ot(this.node(),e).ease}function xs(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;st(this,t).ease=n}}function Ms(t){if(typeof t!="function")throw new Error;return this.each(xs(this._id,t))}function Ns(t){typeof t!="function"&&(t=un(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var s=e[o],r=s.length,a=i[o]=[],l,u=0;u<r;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new ct(i,this._parents,this._name,this._id)}function zs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,s=Math.min(i,o),r=new Array(i),a=0;a<s;++a)for(var l=e[a],u=n[a],c=l.length,h=r[a]=new Array(c),p,w=0;w<c;++w)(p=l[w]||u[w])&&(h[w]=p);for(;a<i;++a)r[a]=e[a];return new ct(r,this._parents,this._name,this._id)}function Es(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ss(t,e,n){var i,o,s=Es(e)?xe:st;return function(){var r=s(this,t),a=r.on;a!==i&&(o=(i=a).copy()).on(e,n),r.on=o}}function As(t,e){var n=this._id;return arguments.length<2?ot(this.node(),n).on.on(t):this.each(Ss(n,t,e))}function Rs(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ts(){return this.on("end.remove",Rs(this._id))}function Bs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=be(t));for(var i=this._groups,o=i.length,s=new Array(o),r=0;r<o;++r)for(var a=i[r],l=a.length,u=s[r]=new Array(l),c,h,p=0;p<l;++p)(c=a[p])&&(h=t.call(c,c.__data__,p,a))&&("__data__"in c&&(h.__data__=c.__data__),u[p]=h,te(u[p],e,n,p,u,ot(c,n)));return new ct(s,this._parents,e,n)}function Is(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ln(t));for(var i=this._groups,o=i.length,s=[],r=[],a=0;a<o;++a)for(var l=i[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var p=t.call(c,c.__data__,h,l),w,z=ot(c,n),S=0,R=p.length;S<R;++S)(w=p[S])&&te(w,e,n,S,p,z);s.push(p),r.push(c)}return new ct(s,r,e,n)}var Ds=At.prototype.constructor;function Vs(){return new Ds(this._groups,this._parents)}function Ps(t,e){var n,i,o;return function(){var s=_t(this,t),r=(this.style.removeProperty(t),_t(this,t));return s===r?null:s===n&&r===i?o:o=e(n=s,i=r)}}function Sn(t){return function(){this.style.removeProperty(t)}}function Hs(t,e,n){var i,o=n+"",s;return function(){var r=_t(this,t);return r===o?null:r===i?s:s=e(i=r,n)}}function Fs(t,e,n){var i,o,s;return function(){var r=_t(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),_t(this,t))),r===l?null:r===i&&l===o?s:(o=l,s=e(i=r,a))}}function Os(t,e){var n,i,o,s="style."+e,r="end."+s,a;return function(){var l=st(this,t),u=l.on,c=l.value[s]==null?a||(a=Sn(e)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(r,o=c),l.on=i}}function Ls(t,e,n){var i=(t+="")=="transform"?Lr:En;return e==null?this.styleTween(t,Ps(t,i)).on("end.style."+t,Sn(t)):typeof e=="function"?this.styleTween(t,Fs(t,i,Me(this,"style."+t,e))).each(Os(this._id,t)):this.styleTween(t,Hs(t,i,e),n).on("end.style."+t,null)}function Xs(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Us(t,e,n){var i,o;function s(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&Xs(t,r,n)),i}return s._value=e,s}function qs(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Us(t,e,n??""))}function Ys(t){return function(){this.textContent=t}}function Ws(t){return function(){var e=t(this);this.textContent=e??""}}function Gs(t){return this.tween("text",typeof t=="function"?Ws(Me(this,"text",t)):Ys(t==null?"":t+""))}function Zs(t){return function(e){this.textContent=t.call(this,e)}}function Ks(t){var e,n;function i(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Zs(o)),e}return i._value=t,i}function Qs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ks(t))}function Js(){for(var t=this._name,e=this._id,n=An(),i=this._groups,o=i.length,s=0;s<o;++s)for(var r=i[s],a=r.length,l,u=0;u<a;++u)if(l=r[u]){var c=ot(l,e);te(l,t,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ct(i,this._parents,t,n)}function js(){var t,e,n=this,i=n._id,o=n.size();return new Promise(function(s,r){var a={value:r},l={value:function(){--o===0&&s()}};n.each(function(){var u=st(this,i),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),o===0&&s()})}var ta=0;function ct(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function An(){return++ta}var at=At.prototype;ct.prototype={constructor:ct,select:Bs,selectAll:Is,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:Ns,merge:zs,selection:Vs,transition:Js,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:As,attr:fs,attrTween:vs,style:Ls,styleTween:qs,text:Gs,textTween:Qs,remove:Ts,tween:os,delay:ws,duration:ks,ease:Cs,easeVarying:Ms,end:js,[Symbol.iterator]:at[Symbol.iterator]};function ea(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var na={time:null,delay:0,duration:250,ease:ea};function ia(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function oa(t){var e,n;t instanceof ct?(e=t._id,t=t._name):(e=An(),(n=na).time=Ce(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var r=i[s],a=r.length,l,u=0;u<a;++u)(l=r[u])&&te(l,t,e,u,r,n||ia(l,e));return new ct(i,this._parents,t,e)}At.prototype.interrupt=es;At.prototype.transition=oa;const Vt=t=>()=>t;function ra(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ut(t,e,n){this.k=t,this.x=e,this.y=n}ut.prototype={constructor:ut,scale:function(t){return t===1?this:new ut(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ut(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ne=new ut(1,0,0);ut.prototype;function le(t){t.stopImmediatePropagation()}function Ct(t){t.preventDefault(),t.stopImmediatePropagation()}function sa(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function aa(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ke(){return this.__zoom||Ne}function la(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ua(){return navigator.maxTouchPoints||"ontouchstart"in this}function ca(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function fa(){var t=sa,e=aa,n=ca,i=la,o=ua,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Wr,u=_e("start","zoom","end"),c,h,p,w=500,z=150,S=0,R=10;function $(f){f.property("__zoom",Ke).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",H).filter(o).on("touchstart.zoom",ee).on("touchmove.zoom",ne).on("touchend.zoom touchcancel.zoom",ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}$.transform=function(f,b,m,k){var g=f.selection?f.selection():f;g.property("__zoom",Ke),f!==g?d(f,b,m,k):g.interrupt().each(function(){L(this,arguments).event(k).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},$.scaleBy=function(f,b,m,k){$.scaleTo(f,function(){var g=this.__zoom.k,_=typeof b=="function"?b.apply(this,arguments):b;return g*_},m,k)},$.scaleTo=function(f,b,m,k){$.transform(f,function(){var g=e.apply(this,arguments),_=this.__zoom,y=m==null?E(g):typeof m=="function"?m.apply(this,arguments):m,M=_.invert(y),B=typeof b=="function"?b.apply(this,arguments):b;return n(N(V(_,B),y,M),g,r)},m,k)},$.translateBy=function(f,b,m,k){$.transform(f,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof m=="function"?m.apply(this,arguments):m),e.apply(this,arguments),r)},null,k)},$.translateTo=function(f,b,m,k,g){$.transform(f,function(){var _=e.apply(this,arguments),y=this.__zoom,M=k==null?E(_):typeof k=="function"?k.apply(this,arguments):k;return n(Ne.translate(M[0],M[1]).scale(y.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof m=="function"?-m.apply(this,arguments):-m),_,r)},k,g)};function V(f,b){return b=Math.max(s[0],Math.min(s[1],b)),b===f.k?f:new ut(b,f.x,f.y)}function N(f,b,m){var k=b[0]-m[0]*f.k,g=b[1]-m[1]*f.k;return k===f.x&&g===f.y?f:new ut(f.k,k,g)}function E(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function d(f,b,m,k){f.on("start.zoom",function(){L(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(k).end()}).tween("zoom",function(){var g=this,_=arguments,y=L(g,_).event(k),M=e.apply(g,_),B=m==null?E(M):typeof m=="function"?m.apply(g,_):m,F=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),D=g.__zoom,X=typeof b=="function"?b.apply(g,_):b,tt=l(D.invert(B).concat(F/D.k),X.invert(B).concat(F/X.k));return function(W){if(W===1)W=X;else{var et=tt(W),oe=F/et[2];W=new ut(oe,B[0]-et[0]*oe,B[1]-et[1]*oe)}y.zoom(null,W)}})}function L(f,b,m){return!m&&f.__zooming||new I(f,b)}function I(f,b){this.that=f,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(f,b),this.taps=0}I.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,b){return this.mouse&&f!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var b=dt(this.that).datum();u.call(f,this.that,new ra(f,{sourceEvent:this.sourceEvent,target:$,transform:this.that.__zoom,dispatch:u}),b)}};function P(f,...b){if(!t.apply(this,arguments))return;var m=L(this,b).event(f),k=this.__zoom,g=Math.max(s[0],Math.min(s[1],k.k*Math.pow(2,i.apply(this,arguments)))),_=ft(f);if(m.wheel)(m.mouse[0][0]!==_[0]||m.mouse[0][1]!==_[1])&&(m.mouse[1]=k.invert(m.mouse[0]=_)),clearTimeout(m.wheel);else{if(k.k===g)return;m.mouse=[_,k.invert(_)],Ot(this),m.start()}Ct(f),m.wheel=setTimeout(y,z),m.zoom("mouse",n(N(V(k,g),m.mouse[0],m.mouse[1]),m.extent,r));function y(){m.wheel=null,m.end()}}function T(f,...b){if(p||!t.apply(this,arguments))return;var m=f.currentTarget,k=L(this,b,!0).event(f),g=dt(f.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",F,!0),_=ft(f,m),y=f.clientX,M=f.clientY;_r(f.view),le(f),k.mouse=[_,this.__zoom.invert(_)],Ot(this),k.start();function B(D){if(Ct(D),!k.moved){var X=D.clientX-y,tt=D.clientY-M;k.moved=X*X+tt*tt>S}k.event(D).zoom("mouse",n(N(k.that.__zoom,k.mouse[0]=ft(D,m),k.mouse[1]),k.extent,r))}function F(D){g.on("mousemove.zoom mouseup.zoom",null),br(D.view,k.moved),Ct(D),k.event(D).end()}}function H(f,...b){if(t.apply(this,arguments)){var m=this.__zoom,k=ft(f.changedTouches?f.changedTouches[0]:f,this),g=m.invert(k),_=m.k*(f.shiftKey?.5:2),y=n(N(V(m,_),k,g),e.apply(this,b),r);Ct(f),a>0?dt(this).transition().duration(a).call(d,y,k,f):dt(this).call($.transform,y,k,f)}}function ee(f,...b){if(t.apply(this,arguments)){var m=f.touches,k=m.length,g=L(this,b,f.changedTouches.length===k).event(f),_,y,M,B;for(le(f),y=0;y<k;++y)M=m[y],B=ft(M,this),B=[B,this.__zoom.invert(B),M.identifier],g.touch0?!g.touch1&&g.touch0[2]!==B[2]&&(g.touch1=B,g.taps=0):(g.touch0=B,_=!0,g.taps=1+!!c);c&&(c=clearTimeout(c)),_&&(g.taps<2&&(h=B[0],c=setTimeout(function(){c=null},w)),Ot(this),g.start())}}function ne(f,...b){if(this.__zooming){var m=L(this,b).event(f),k=f.changedTouches,g=k.length,_,y,M,B;for(Ct(f),_=0;_<g;++_)y=k[_],M=ft(y,this),m.touch0&&m.touch0[2]===y.identifier?m.touch0[0]=M:m.touch1&&m.touch1[2]===y.identifier&&(m.touch1[0]=M);if(y=m.that.__zoom,m.touch1){var F=m.touch0[0],D=m.touch0[1],X=m.touch1[0],tt=m.touch1[1],W=(W=X[0]-F[0])*W+(W=X[1]-F[1])*W,et=(et=tt[0]-D[0])*et+(et=tt[1]-D[1])*et;y=V(y,Math.sqrt(W/et)),M=[(F[0]+X[0])/2,(F[1]+X[1])/2],B=[(D[0]+tt[0])/2,(D[1]+tt[1])/2]}else if(m.touch0)M=m.touch0[0],B=m.touch0[1];else return;m.zoom("touch",n(N(y,M,B),m.extent,r))}}function ie(f,...b){if(this.__zooming){var m=L(this,b).event(f),k=f.changedTouches,g=k.length,_,y;for(le(f),p&&clearTimeout(p),p=setTimeout(function(){p=null},w),_=0;_<g;++_)y=k[_],m.touch0&&m.touch0[2]===y.identifier?delete m.touch0:m.touch1&&m.touch1[2]===y.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(y=ft(y,this),Math.hypot(h[0]-y[0],h[1]-y[1])<R)){var M=dt(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return $.wheelDelta=function(f){return arguments.length?(i=typeof f=="function"?f:Vt(+f),$):i},$.filter=function(f){return arguments.length?(t=typeof f=="function"?f:Vt(!!f),$):t},$.touchable=function(f){return arguments.length?(o=typeof f=="function"?f:Vt(!!f),$):o},$.extent=function(f){return arguments.length?(e=typeof f=="function"?f:Vt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),$):e},$.scaleExtent=function(f){return arguments.length?(s[0]=+f[0],s[1]=+f[1],$):[s[0],s[1]]},$.translateExtent=function(f){return arguments.length?(r[0][0]=+f[0][0],r[1][0]=+f[1][0],r[0][1]=+f[0][1],r[1][1]=+f[1][1],$):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},$.constrain=function(f){return arguments.length?(n=f,$):n},$.duration=function(f){return arguments.length?(a=+f,$):a},$.interpolate=function(f){return arguments.length?(l=f,$):l},$.on=function(){var f=u.on.apply(u,arguments);return f===u?$:f},$.clickDistance=function(f){return arguments.length?(S=(f=+f)*f,$):Math.sqrt(S)},$.tapDistance=function(f){return arguments.length?(R=+f,$):R},$}const Rn=Symbol("MiniMapSlots"),ha=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],da={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},ma=Zt({...da,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(t,{emit:e}){const n=t,i=Dn(Rn),o=en(),s=mt(()=>o.style??{});function r(h){e("click",h)}function a(h){e("dblclick",h)}function l(h){e("mouseenter",h)}function u(h){e("mousemove",h)}function c(h){e("mouseleave",h)}return(h,p)=>!h.hidden&&h.dimensions.width!==0&&h.dimensions.height!==0?(x(),A(Kt,{key:0},[C(i)[`node-${n.type}`]?(x(),Z(yt(C(i)[`node-${n.type}`]),Vn(ze({key:0},{...n,...h.$attrs})),null,16)):(x(),A("rect",ze({key:1,id:h.id},h.$attrs,{class:["vue-flow__minimap-node",{selected:h.selected,dragging:h.dragging}],x:h.position.x,y:h.position.y,rx:h.borderRadius,ry:h.borderRadius,width:h.dimensions.width,height:h.dimensions.height,fill:h.color||s.value.background||s.value.backgroundColor,stroke:h.strokeColor,"stroke-width":h.strokeWidth,"shape-rendering":h.shapeRendering,onClick:r,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,ha))],64)):q("",!0)}}),pa=["width","height","viewBox","aria-labelledby"],va=["id"],ga=["d","fill","stroke","stroke-width"],ya={name:"MiniMap",compatConfig:{MODE:3}},wa=Zt({...ya,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(t,{emit:e}){const n=Tn(),i=en(),o=200,s=150,{id:r,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:h,d3Selection:p,d3Zoom:w,getNodesInitialized:z}=Qt(),S=nn();Pn(Rn,n);const R=mt(()=>{var g;return t.width??((g=i.style)==null?void 0:g.width)??o}),$=mt(()=>{var g;return t.height??((g=i.style)==null?void 0:g.height)??s}),V=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",N=nt(()=>typeof t.nodeColor=="string"?()=>t.nodeColor:t.nodeColor),E=nt(()=>typeof t.nodeStrokeColor=="string"?()=>t.nodeStrokeColor:t.nodeStrokeColor),d=nt(()=>typeof t.nodeClassName=="string"?()=>t.nodeClassName:typeof t.nodeClassName=="function"?t.nodeClassName:()=>""),L=nt(()=>Un(z.value.filter(g=>!g.hidden))),I=nt(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),P=nt(()=>z.value&&z.value.length?qn(L.value,I.value):I.value),T=nt(()=>{const g=P.value.width/R.value,_=P.value.height/$.value;return Math.max(g,_)}),H=nt(()=>{const g=T.value*R.value,_=T.value*$.value,y=t.offsetScale*T.value;return{offset:y,x:P.value.x-(g-P.value.width)/2-y,y:P.value.y-(_-P.value.height)/2-y,width:g+y*2,height:_+y*2}}),ee=nt(()=>!H.value.x||!H.value.y?"":`
    M${H.value.x-H.value.offset},${H.value.y-H.value.offset}
    h${H.value.width+H.value.offset*2}
    v${H.value.height+H.value.offset*2}
    h${-H.value.width-H.value.offset*2}z
    M${I.value.x+t.maskBorderRadius},${I.value.y}
    h${I.value.width-2*t.maskBorderRadius}
    a${t.maskBorderRadius},${t.maskBorderRadius} 0 0 1 ${t.maskBorderRadius},${t.maskBorderRadius}
    v${I.value.height-2*t.maskBorderRadius}
    a${t.maskBorderRadius},${t.maskBorderRadius} 0 0 1 -${t.maskBorderRadius},${t.maskBorderRadius}
    h${-(I.value.width-2*t.maskBorderRadius)}
    a${t.maskBorderRadius},${t.maskBorderRadius} 0 0 1 -${t.maskBorderRadius},-${t.maskBorderRadius}
    v${-(I.value.height-2*t.maskBorderRadius)}
    a${t.maskBorderRadius},${t.maskBorderRadius} 0 0 1 ${t.maskBorderRadius},-${t.maskBorderRadius}z`);Bn(g=>{if(S.value){const _=dt(S.value),y=F=>{if(F.sourceEvent.type!=="wheel"||!p.value||!w.value)return;const D=-F.sourceEvent.deltaY*(F.sourceEvent.deltaMode===1?.05:F.sourceEvent.deltaMode?1:.002)*t.zoomStep,X=l.value.zoom*2**D;w.value.scaleTo(p.value,X)},M=F=>{if(F.sourceEvent.type!=="mousemove"||!p.value||!w.value)return;const D=T.value*Math.max(1,l.value.zoom)*(t.inversePan?-1:1),X={x:l.value.x-F.sourceEvent.movementX*D,y:l.value.y-F.sourceEvent.movementY*D},tt=[[0,0],[c.value.width,c.value.height]],W=Ne.translate(X.x,X.y).scale(l.value.zoom),et=w.value.constrain()(W,tt,u.value);w.value.transform(p.value,et)},B=fa().on("zoom",t.pannable?M:()=>{}).on("zoom.wheel",t.zoomable?y:()=>{});_.call(B),g(()=>{_.on("zoom",null)})}},{flush:"post"});function ne(g){const[_,y]=ft(g);e("click",{event:g,position:{x:_,y}})}function ie(g,_){const y={event:g,node:_,connectedEdges:kt([_],a.value)};h.miniMapNodeClick(y),e("nodeClick",y)}function f(g,_){const y={event:g,node:_,connectedEdges:kt([_],a.value)};h.miniMapNodeDoubleClick(y),e("nodeDblclick",y)}function b(g,_){const y={event:g,node:_,connectedEdges:kt([_],a.value)};h.miniMapNodeMouseEnter(y),e("nodeMouseenter",y)}function m(g,_){const y={event:g,node:_,connectedEdges:kt([_],a.value)};h.miniMapNodeMouseMove(y),e("nodeMousemove",y)}function k(g,_){const y={event:g,node:_,connectedEdges:kt([_],a.value)};h.miniMapNodeMouseLeave(y),e("nodeMouseleave",y)}return(g,_)=>(x(),Z(C(on),{position:g.position,class:Lt(["vue-flow__minimap",{pannable:g.pannable,zoomable:g.zoomable}])},{default:j(()=>[(x(),A("svg",{ref_key:"el",ref:S,width:R.value,height:$.value,viewBox:[H.value.x,H.value.y,H.value.width,H.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${C(r)}`,onClick:ne},[g.ariaLabel?(x(),A("title",{key:0,id:`vue-flow__minimap-${C(r)}`},ce(g.ariaLabel),9,va)):q("",!0),(x(!0),A(Kt,null,In(C(z),y=>(x(),Z(ma,{id:y.id,key:y.id,position:y.computedPosition,dimensions:y.dimensions,selected:y.selected,dragging:y.dragging,style:je(y.style),class:Lt(d.value(y)),color:N.value(y),"border-radius":g.nodeBorderRadius,"stroke-color":E.value(y),"stroke-width":g.nodeStrokeWidth,"shape-rendering":C(V),type:y.type,hidden:y.hidden,onClick:M=>ie(M,y),onDblclick:M=>f(M,y),onMouseenter:M=>b(M,y),onMousemove:M=>m(M,y),onMouseleave:M=>k(M,y)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),v("path",{class:"vue-flow__minimap-mask",d:ee.value,fill:g.maskColor,stroke:g.maskStrokeColor,"stroke-width":g.maskStrokeWidth,"fill-rule":"evenodd"},null,8,ga)],8,pa))]),_:1},8,["position","class"]))}}),O=[];for(let t=0;t<256;++t)O.push((t+256).toString(16).slice(1));function _a(t,e=0){return(O[t[e+0]]+O[t[e+1]]+O[t[e+2]]+O[t[e+3]]+"-"+O[t[e+4]]+O[t[e+5]]+"-"+O[t[e+6]]+O[t[e+7]]+"-"+O[t[e+8]]+O[t[e+9]]+"-"+O[t[e+10]]+O[t[e+11]]+O[t[e+12]]+O[t[e+13]]+O[t[e+14]]+O[t[e+15]]).toLowerCase()}let ue;const ba=new Uint8Array(16);function ka(){if(!ue){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ue=crypto.getRandomValues.bind(crypto)}return ue(ba)}const $a=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qe={randomUUID:$a};function Je(t,e,n){var o;if(Qe.randomUUID&&!t)return Qe.randomUUID();t=t||{};const i=t.random??((o=t.rng)==null?void 0:o.call(t))??ka();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,_a(i)}const Ca={class:"breadcrumb push"},xa={class:"content"},Ma={class:"row"},Na={class:"col-md-12 mb-4"},za={class:"block block-rounded"},Ea={class:"block-content"},Sa={class:"row"},Aa={class:"col-md-6"},Ra={class:"mb-4"},Ta={key:0,class:"invalid-feedback d-block"},Ba={class:"col-md-6"},Ia={class:"mb-4"},Da={key:0,class:"invalid-feedback d-block"},Va={class:"col-md-12"},Pa={class:"block block-rounded"},Ha={class:"block-header block-header-default"},Fa={class:"block-options"},Oa=["disabled"],La={class:"block-content p-0"},Xa={class:"workflow-builder",style:{height:"600px",position:"relative"}},Ua={class:"workflow-sidebar bg-body-light border-end p-3",style:{width:"260px",height:"100%",position:"absolute",left:"0",top:"0","overflow-y":"auto","z-index":"10"}},qa={class:"nav nav-tabs nav-tabs-block",role:"tablist"},Ya={class:"nav-item",role:"presentation"},Wa={class:"nav-item",role:"presentation"},Ga={key:0,class:"py-3"},Za={class:"d-grid gap-2"},Ka={key:1,class:"py-3"},Qa={class:"form-check form-switch mb-3"},Ja={class:"form-check form-switch"},ja={style:{"margin-left":"260px",height:"100%"}},tl={class:"d-flex justify-content-between"},el=["disabled"],fl={__name:"Create",props:{prompts:{type:Array,default:()=>[]},apiKeys:{type:Array,default:()=>[]}},setup(t){const e=Hn({name:"",description:"",nodes:[],edges:[],settings:{autoSave:!0,notifyOnCompletion:!0}}),n={promptNode:Wn,conditionNode:Gn,inputNode:Zn,outputNode:Kn,apiNode:Qn,transformNode:Jn},{nodes:i,edges:o,addNodes:s,addEdges:r,onConnect:a,onNodesChange:l,onEdgesChange:u}=Qt(),c=nn("nodes"),h=(E,d={})=>{const I={id:`node-${Je()}`,type:`${E}Node`,position:{x:250,y:100},data:{...d,label:d.label||`${E.charAt(0).toUpperCase()+E.slice(1)}`,type:E}};return s([I]),I},p=()=>{h("prompt",{label:"Prompt",content:"",prompt_id:null,provider:"openai",model:"gpt-4",temperature:.7,max_tokens:2e3,output_variable:"result"})},w=()=>{h("condition",{label:"Condition",condition:"",true_path:null,false_path:null})},z=()=>{h("input",{label:"Input",variable:"",default_value:""})},S=()=>{h("output",{label:"Output",variables:[]})},R=()=>{h("api",{label:"API Call",url:"",method:"GET",headers:{},body:{},output_variable:"api_result"})},$=()=>{h("transform",{label:"Transform",input_variable:"",output_variable:"",transformation:"json_parse",regex:"",code:""})};a(E=>{r([{id:`edge-${Je()}`,source:E.source,target:E.target,animated:!0}])}),l(E=>{e.nodes=i.value.map(d=>({id:d.id,type:d.data.type,position:d.position,data:d.data}))}),u(E=>{e.edges=o.value}),Fn(()=>{h("input",{label:"Input",variable:"input",default_value:""});const E=h("output",{label:"Output",variables:["result"]});E.position.y=300,e.nodes=i.value.map(d=>({id:d.id,type:d.data.type,position:d.position,data:d.data}))});const V=()=>{e.nodes=i.value.map(E=>({id:E.id,type:E.data.type,position:E.position,data:E.data})),e.edges=o.value,e.post(route("workflows.store"),{onSuccess:()=>{}})},N=nt(()=>e.name.trim()!==""&&i.value.length>0);return(E,d)=>{const L=Ee("BasePageHeading"),I=Ee("Panel"),P=On("click-ripple");return x(),A(Kt,null,[J(C(Ln),{title:"Create Workflow"}),J(L,{title:"Create Workflow",subtitle:"Build your AI automation flow"},{extra:j(()=>[v("nav",Ca,[J(C(re),{href:E.route("dashboard"),class:"breadcrumb-item"},{default:j(()=>d[8]||(d[8]=[v("i",{class:"fa fa-home"},null,-1)])),_:1},8,["href"]),J(C(re),{href:E.route("workflows.index"),class:"breadcrumb-item"},{default:j(()=>d[9]||(d[9]=[Q(" Workflows ")])),_:1},8,["href"]),d[10]||(d[10]=v("span",{class:"breadcrumb-item active"},"Create",-1))])]),_:1}),v("div",xa,[v("div",Ma,[v("div",Na,[v("div",za,[d[13]||(d[13]=v("div",{class:"block-header block-header-default"},[v("h3",{class:"block-title"},"Workflow Details")],-1)),v("div",Ea,[v("div",Sa,[v("div",Aa,[v("div",Ra,[d[11]||(d[11]=v("label",{class:"form-label",for:"workflow-name"},"Workflow Name",-1)),G(v("input",{type:"text",id:"workflow-name",class:"form-control","onUpdate:modelValue":d[0]||(d[0]=T=>C(e).name=T),placeholder:"Enter workflow name",required:""},null,512),[[Se,C(e).name]]),C(e).errors.name?(x(),A("div",Ta,ce(C(e).errors.name),1)):q("",!0)])]),v("div",Ba,[v("div",Ia,[d[12]||(d[12]=v("label",{class:"form-label",for:"workflow-description"},"Description (optional)",-1)),G(v("textarea",{id:"workflow-description",class:"form-control","onUpdate:modelValue":d[1]||(d[1]=T=>C(e).description=T),placeholder:"Describe what this workflow does",rows:"1"},null,512),[[Se,C(e).description]]),C(e).errors.description?(x(),A("div",Da,ce(C(e).errors.description),1)):q("",!0)])])])])])]),v("div",Va,[v("div",Pa,[v("div",Ha,[d[15]||(d[15]=v("h3",{class:"block-title"},"Workflow Builder",-1)),v("div",Fa,[G((x(),A("button",{type:"button",class:"btn btn-sm btn-alt-primary",onClick:V,disabled:!N.value||C(e).processing},d[14]||(d[14]=[v("i",{class:"fa fa-fw fa-save opacity-50 me-1"},null,-1),Q(" Save Workflow ")]),8,Oa)),[[P]])])]),v("div",La,[v("div",Xa,[v("div",Ua,[v("ul",qa,[v("li",Ya,[v("button",{class:Lt(["nav-link",{active:c.value==="nodes"}]),onClick:d[2]||(d[2]=T=>c.value="nodes")},d[16]||(d[16]=[v("i",{class:"fa fa-cubes me-1"},null,-1),Q(" Nodes ")]),2)]),v("li",Wa,[v("button",{class:Lt(["nav-link",{active:c.value==="properties"}]),onClick:d[3]||(d[3]=T=>c.value="properties")},d[17]||(d[17]=[v("i",{class:"fa fa-cog me-1"},null,-1),Q(" Properties ")]),2)])]),c.value==="nodes"?(x(),A("div",Ga,[d[24]||(d[24]=v("div",{class:"fs-sm fw-semibold text-uppercase mb-2"},"Add Nodes",-1)),v("div",Za,[G((x(),A("button",{type:"button",class:"btn btn-alt-primary",onClick:p},d[18]||(d[18]=[v("i",{class:"fa fa-file-alt me-1"},null,-1),Q(" Prompt ")]))),[[P]]),G((x(),A("button",{type:"button",class:"btn btn-alt-warning",onClick:w},d[19]||(d[19]=[v("i",{class:"fa fa-code-branch me-1"},null,-1),Q(" Condition ")]))),[[P]]),G((x(),A("button",{type:"button",class:"btn btn-alt-info",onClick:z},d[20]||(d[20]=[v("i",{class:"fa fa-sign-in-alt me-1"},null,-1),Q(" Input ")]))),[[P]]),G((x(),A("button",{type:"button",class:"btn btn-alt-success",onClick:S},d[21]||(d[21]=[v("i",{class:"fa fa-sign-out-alt me-1"},null,-1),Q(" Output ")]))),[[P]]),G((x(),A("button",{type:"button",class:"btn btn-alt-danger",onClick:R},d[22]||(d[22]=[v("i",{class:"fa fa-globe me-1"},null,-1),Q(" API Call ")]))),[[P]]),G((x(),A("button",{type:"button",class:"btn btn-alt-secondary",onClick:$},d[23]||(d[23]=[v("i",{class:"fa fa-exchange-alt me-1"},null,-1),Q(" Transform ")]))),[[P]])]),d[25]||(d[25]=v("div",{class:"fs-sm fw-semibold text-uppercase mt-4 mb-2"},"Instructions",-1)),d[26]||(d[26]=v("ul",{class:"fs-sm text-muted ps-3"},[v("li",null,"Add nodes to build your workflow"),v("li",null,"Connect nodes by dragging from one node to another"),v("li",null,"Configure nodes by selecting them"),v("li",null,"Input nodes provide variables to your workflow"),v("li",null,"Output nodes define the workflow result")],-1))])):q("",!0),c.value==="properties"?(x(),A("div",Ka,[d[29]||(d[29]=v("div",{class:"alert alert-info d-flex"},[v("div",{class:"flex-shrink-0"},[v("i",{class:"fa fa-info-circle fa-fw"})]),v("div",{class:"ms-2"}," Select a node in the workflow to view and edit its properties ")],-1)),v("div",Qa,[G(v("input",{class:"form-check-input",type:"checkbox",id:"workflow-autosave","onUpdate:modelValue":d[4]||(d[4]=T=>C(e).settings.autoSave=T)},null,512),[[Ae,C(e).settings.autoSave]]),d[27]||(d[27]=v("label",{class:"form-check-label",for:"workflow-autosave"}," Auto save workflow on execution ",-1))]),v("div",Ja,[G(v("input",{class:"form-check-input",type:"checkbox",id:"workflow-notify","onUpdate:modelValue":d[5]||(d[5]=T=>C(e).settings.notifyOnCompletion=T)},null,512),[[Ae,C(e).settings.notifyOnCompletion]]),d[28]||(d[28]=v("label",{class:"form-check-label",for:"workflow-notify"}," Notify on workflow completion ",-1))])])):q("",!0)]),v("div",ja,[J(C(Yn),{modelValue:C(i),"onUpdate:modelValue":d[6]||(d[6]=T=>Re(i)?i.value=T:null),edges:C(o),"onUpdate:edges":d[7]||(d[7]=T=>Re(o)?o.value=T:null),nodeTypes:n,"default-zoom":1.5,"min-zoom":.2,"max-zoom":4,onNodesChange:C(l),onEdgesChange:C(u),onConnect:C(a),class:"workflow-canvas"},{default:j(()=>[J(C(ri),{"pattern-color":"#aaa",gap:"24"}),J(C(wa),{height:"120",width:"240"}),J(C(Di)),J(I,{position:"top-right",class:"p-2"},{default:j(()=>d[30]||(d[30]=[v("div",{class:"btn-group"},[v("button",{type:"button",class:"btn btn-sm btn-alt-secondary",title:"Zoom In",onClick:()=>{}},[v("i",{class:"fa fa-search-plus"})]),v("button",{type:"button",class:"btn btn-sm btn-alt-secondary",title:"Zoom Out",onClick:()=>{}},[v("i",{class:"fa fa-search-minus"})]),v("button",{type:"button",class:"btn btn-sm btn-alt-secondary",title:"Fit View",onClick:()=>{}},[v("i",{class:"fa fa-arrows-alt"})])],-1)])),_:1})]),_:1},8,["modelValue","edges","onNodesChange","onEdgesChange","onConnect"])])])])])])]),v("div",tl,[G((x(),Z(C(re),{href:E.route("workflows.index"),class:"btn btn-alt-secondary"},{default:j(()=>d[31]||(d[31]=[v("i",{class:"fa fa-arrow-left opacity-50 me-1"},null,-1),Q(" Cancel ")])),_:1},8,["href"])),[[P]]),G((x(),A("button",{type:"button",class:"btn btn-alt-primary",onClick:V,disabled:!N.value||C(e).processing},d[32]||(d[32]=[v("i",{class:"fa fa-save opacity-50 me-1"},null,-1),Q(" Save Workflow ")]),8,el)),[[P]])])])],64)}}};export{fl as default};
