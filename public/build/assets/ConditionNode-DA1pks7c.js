import{r as $,A as B,c as n,d as i,e as b,f as e,u as v,t as l,q as C,g as p,n as f,l as q,F as _,h as w}from"./app-dlXwsprq.js";import{u as J,d as g}from"./vue-flow-core-CslHATJU.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"condition-node-content"},D={class:"condition-node-header"},O={class:"condition-node-label"},T=["title"],A={key:0,class:"condition-node-settings"},I={class:"setting-group"},j={class:"setting-option"},z={class:"setting-help"},G={class:"setting-group"},H={class:"setting-option"},M={class:"condition-variables-list"},Y=["onClick"],K={key:0,class:"condition-no-variables"},P={class:"setting-group"},Q={class:"setting-option"},R={class:"condition-examples-list"},W=["onClick"],X={class:"setting-group"},Z={class:"row g-1"},tt={class:"col-6"},et={class:"setting-option"},at={class:"col-6"},ot={class:"setting-option"},st={key:1,class:"condition-node-summary"},nt={class:"condition-expr"},it={class:"condition-paths"},lt={class:"condition-path-true"},dt={class:"condition-path-false"},ct={__name:"ConditionNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnectable:{type:Boolean,default:!0}},setup(o){const u=o,{findNode:x,setNodes:N,getNodes:S}=J(),d=$({showSettings:!1}),k=()=>{d.value.showSettings=!d.value.showSettings},m=B(()=>{const s=S.value,t=[];return s.forEach(a=>{a.data&&(a.data.type==="input"&&a.data.variable&&t.push(a.data.variable),a.data.type==="prompt"&&a.data.output_variable&&t.push(a.data.output_variable),a.data.type==="api"&&a.data.output_variable&&t.push(a.data.output_variable),a.data.type==="transform"&&a.data.output_variable&&t.push(a.data.output_variable))}),[...new Set(t)]}),c=(s,t)=>{const a=x(u.id);if(!a)return;const r={...a,data:{...a.data,[s]:t}};N(h=>h.map(y=>y.id===u.id?r:y))},V=s=>{const t=u.data.condition||"";c("condition",t+" {{"+s+"}} ")},E=[{label:"Contains text",condition:'{{variable}}.toLowerCase().includes("text")'},{label:"Equals value",condition:'{{variable}} === "value"'},{label:"Greater than",condition:"parseFloat({{variable}}) > 10"},{label:"Is empty",condition:'!{{variable}} || {{variable}}.trim() === ""'},{label:"JSON has property",condition:'typeof JSON.parse({{variable}}).property !== "undefined"'}],F=s=>{c("condition",s.condition)};return(s,t)=>(i(),n("div",{class:C(["condition-node",{selected:o.selected}])},[b(v(g),{type:"target",position:"top",id:o.id+"-target",connectable:o.isConnectable},null,8,["id","connectable"]),b(v(g),{type:"source",position:"bottom",id:o.id+"-source-true",connectable:o.isConnectable,class:"source-true"},null,8,["id","connectable"]),b(v(g),{type:"source",position:"right",id:o.id+"-source-false",connectable:o.isConnectable,class:"source-false"},null,8,["id","connectable"]),e("div",U,[e("div",D,[t[6]||(t[6]=e("i",{class:"fa fa-code-branch text-warning me-1"},null,-1)),e("span",O,l(o.data.label),1),e("button",{type:"button",class:"condition-node-toggle",onClick:k,title:d.value.showSettings?"Hide settings":"Show settings"},[e("i",{class:C(["fa",d.value.showSettings?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,T)]),d.value.showSettings?(i(),n("div",A,[e("div",I,[t[7]||(t[7]=e("label",{class:"setting-label"},"Condition Expression",-1)),e("div",j,[p(e("textarea",{class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=a=>o.data.condition=a),rows:"3",placeholder:"Enter a JavaScript condition",onChange:t[1]||(t[1]=a=>c("condition",o.data.condition))},null,544),[[f,o.data.condition]])]),e("div",z,"JavaScript expression to evaluate. Use "+l(s.variable)+" for workflow variables.",1)]),e("div",G,[t[8]||(t[8]=e("label",{class:"setting-label"},"Available Variables",-1)),e("div",H,[e("div",M,[(i(!0),n(_,null,w(m.value,a=>(i(),n("button",{key:a,type:"button",class:"condition-variable-btn",onClick:r=>V(a)},l(a),9,Y))),128)),m.value.length===0?(i(),n("div",K," No variables available ")):q("",!0)])])]),e("div",P,[t[9]||(t[9]=e("label",{class:"setting-label"},"Examples",-1)),e("div",Q,[e("div",R,[(i(),n(_,null,w(E,(a,r)=>e("button",{key:r,type:"button",class:"condition-example-btn",onClick:h=>F(a)},l(a.label),9,W)),64))])])]),e("div",X,[e("div",Z,[e("div",tt,[t[10]||(t[10]=e("label",{class:"setting-label"},"True Label",-1)),e("div",et,[p(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[2]||(t[2]=a=>o.data.true_label=a),placeholder:"Yes",onChange:t[3]||(t[3]=a=>c("true_label",o.data.true_label))},null,544),[[f,o.data.true_label]])])]),e("div",at,[t[11]||(t[11]=e("label",{class:"setting-label"},"False Label",-1)),e("div",ot,[p(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[4]||(t[4]=a=>o.data.false_label=a),placeholder:"No",onChange:t[5]||(t[5]=a=>c("false_label",o.data.false_label))},null,544),[[f,o.data.false_label]])])])])])])):(i(),n("div",st,[e("div",nt,l(o.data.condition||"No condition"),1),e("div",it,[e("div",lt,"↓ "+l(o.data.true_label||"True"),1),e("div",dt,"→ "+l(o.data.false_label||"False"),1)])]))])],2))}},vt=L(ct,[["__scopeId","data-v-7406b29e"]]);export{vt as default};
