import{r as _,A as O,c as o,d as i,e as B,f as a,u as F,t as u,q as f,l as m,F as c,h as b,g,v as h}from"./app-DVK38B9a.js";import{u as q,d as D}from"./vue-flow-core-5G_7kKqb.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"output-node-content"},E={class:"output-node-header"},J={class:"output-node-label"},M=["title"],T={key:0,class:"output-node-settings"},U={class:"setting-group"},z={class:"setting-option"},A={class:"output-variables-list"},H={class:"output-variable-name"},I=["onClick"],L={key:0,class:"output-no-variables"},P={class:"setting-option mt-2"},R={class:"input-group input-group-sm"},G=["value"],K=["disabled"],Q={class:"setting-group"},W={class:"setting-option"},X={key:1,class:"output-node-summary"},Y={class:"output-variables"},Z={key:0,class:"text-muted"},tt={class:"output-format"},et={__name:"OutputNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnectable:{type:Boolean,default:!0}},setup(s){const d=s,{findNode:w,setNodes:y,getNodes:V}=q(),l=_({showSettings:!1,newVariable:""}),k=O(()=>{const n=V.value,e=[];return n.forEach(t=>{t.data&&(t.data.type==="input"&&t.data.variable&&e.push(t.data.variable),t.data.type==="prompt"&&t.data.output_variable&&e.push(t.data.output_variable),t.data.type==="api"&&t.data.output_variable&&e.push(t.data.output_variable),t.data.type==="transform"&&t.data.output_variable&&e.push(t.data.output_variable))}),[...new Set(e)]}),S=()=>{l.value.showSettings=!l.value.showSettings},v=(n,e)=>{const t=w(d.id);if(!t)return;const r={...t,data:{...t.data,[n]:e}};y(C=>C.map(p=>p.id===d.id?r:p))},N=()=>{if(!l.value.newVariable)return;const n=[...d.data.variables||[]];n.includes(l.value.newVariable)||(n.push(l.value.newVariable),v("variables",n)),l.value.newVariable=""},x=n=>{const e=[...d.data.variables||[]],t=e.indexOf(n);t!==-1&&(e.splice(t,1),v("variables",e))};return(n,e)=>(i(),o("div",{class:f(["output-node",{selected:s.selected}])},[B(F(D),{type:"target",position:"top",id:s.id+"-target",connectable:s.isConnectable},null,8,["id","connectable"]),a("div",j,[a("div",E,[e[3]||(e[3]=a("i",{class:"fa fa-sign-out-alt text-success me-1"},null,-1)),a("span",J,u(s.data.label),1),a("button",{type:"button",class:"output-node-toggle",onClick:S,title:l.value.showSettings?"Hide settings":"Show settings"},[a("i",{class:f(["fa",l.value.showSettings?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,M)]),l.value.showSettings?(i(),o("div",T,[a("div",U,[e[7]||(e[7]=a("label",{class:"setting-label"},"Output Variables",-1)),a("div",z,[a("div",A,[(i(!0),o(c,null,b(s.data.variables,t=>(i(),o("div",{key:t,class:"output-variable-item"},[a("span",H,u(t),1),a("button",{type:"button",class:"output-variable-remove",onClick:r=>x(t),title:"Remove variable"},e[4]||(e[4]=[a("i",{class:"fa fa-times"},null,-1)]),8,I)]))),128)),!s.data.variables||s.data.variables.length===0?(i(),o("div",L," No output variables selected ")):m("",!0)])]),a("div",P,[a("div",R,[g(a("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[0]||(e[0]=t=>l.value.newVariable=t)},[e[5]||(e[5]=a("option",{value:""},"Select a variable",-1)),(i(!0),o(c,null,b(k.value,t=>(i(),o("option",{key:t,value:t},u(t),9,G))),128))],512),[[h,l.value.newVariable]]),a("button",{type:"button",class:"btn btn-sm btn-outline-success",onClick:N,disabled:!l.value.newVariable},e[6]||(e[6]=[a("i",{class:"fa fa-plus"},null,-1)]),8,K)])]),e[8]||(e[8]=a("div",{class:"setting-help"},"These variables will be included in the workflow result",-1))]),a("div",Q,[e[10]||(e[10]=a("label",{class:"setting-label"},"Output Format",-1)),a("div",W,[g(a("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[1]||(e[1]=t=>s.data.format=t),onChange:e[2]||(e[2]=t=>v("format",s.data.format))},e[9]||(e[9]=[a("option",{value:"json"},"JSON",-1),a("option",{value:"text"},"Plain Text",-1),a("option",{value:"markdown"},"Markdown",-1)]),544),[[h,s.data.format]])])])])):(i(),o("div",X,[a("div",Y,[(i(!0),o(c,null,b(s.data.variables,(t,r)=>(i(),o("span",{key:t},u(t)+u(r<s.data.variables.length-1?", ":""),1))),128)),!s.data.variables||s.data.variables.length===0?(i(),o("span",Z,"No variables")):m("",!0)]),a("div",tt,"Format: "+u(s.data.format||"JSON"),1)]))])],2))}},ot=$(et,[["__scopeId","data-v-9067e7e4"]]);export{ot as default};
