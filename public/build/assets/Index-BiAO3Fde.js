import{r as m,o as F,a as $,b as R,c as a,d as l,e as u,f as t,u as c,m as O,w as i,g as B,x as I,P as b,i as f,F as y,h as _,t as r,q as N,k as Y,j as S,l as V,n as H}from"./app-DVK38B9a.js";const J={class:"content"},L={class:"row items-push"},U={class:"col-xl-8"},z={class:"block-options"},G={key:0,class:"block-content text-center py-6"},K={class:"py-4"},Q={key:1,class:"block-content block-content-full"},X={class:"table-responsive"},Z={class:"table table-bordered table-striped table-vcenter"},tt={class:"d-none d-md-table-cell"},et={class:"text-muted fs-sm"},st={class:"text-center"},ot={class:"form-check form-switch d-inline-block"},lt=["id","checked","onChange"],at={class:"d-none d-sm-table-cell text-center"},nt={class:"fs-xs text-muted"},it={class:"text-center"},dt={class:"btn-group"},rt=["onClick"],ut=["onClick"],ct={class:"col-xl-4"},ft={key:0,class:"text-center py-4"},mt={key:1},bt={class:"list-group push"},pt={class:"fw-semibold"},vt={class:"fs-sm text-muted"},wt={class:"row"},kt={class:"col-md-6"},yt={key:0,class:"mb-4"},ht={class:"input-group"},xt={class:"form-select",id:"workflow-export"},gt=["value"],_t=["disabled"],Et={key:1,class:"mb-4"},Ct={class:"col-md-6"},Bt={class:"modal fade",id:"modal-delete-workflow",tabindex:"-1",role:"dialog","aria-labelledby":"modal-delete-workflow","aria-hidden":"true"},It={class:"modal-dialog modal-dialog-centered",role:"document"},Nt={class:"modal-content"},Wt={class:"block block-rounded block-themed block-transparent mb-0"},Dt={class:"block-content fs-sm"},$t={key:0,class:"fw-semibold"},St={class:"block-content block-content-full text-end bg-body"},Vt={class:"modal fade",id:"modal-execute-workflow",tabindex:"-1",role:"dialog","aria-labelledby":"modal-execute-workflow","aria-hidden":"true"},Mt={class:"modal-dialog modal-dialog-centered",role:"document"},Tt={class:"modal-content"},qt={class:"block block-rounded block-themed block-transparent mb-0"},At={class:"block-content fs-sm"},Pt={key:0,class:"fw-semibold"},jt={key:1},Ft=["for"],Rt=["id","onUpdate:modelValue"],Ot={key:2},Yt={class:"block-content block-content-full text-end bg-body"},Jt={__name:"Index",props:{workflows:{type:Array,required:!0},recentExecutions:{type:Array,default:()=>[]}},setup(p){const E=m(null),w=m(null),h=m(!1),C=m(null),k=m(null),x=m(!1),v=m({}),W=o=>{const e=new Date(o);return new Intl.DateTimeFormat("default",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)},M=o=>{switch(o){case"completed":return"bg-success";case"failed":return"bg-danger";case"running":return"bg-warning";case"pending":return"bg-info";default:return"bg-secondary"}},T=o=>{w.value=o,E.value.show()},q=()=>{w.value&&(h.value=!0,router.delete(route("workflows.destroy",w.value.id),{onSuccess:()=>{E.value.hide(),h.value=!1},onError:()=>{h.value=!1}}))},A=o=>{k.value=o;const e=o.nodes.filter(d=>d.type==="input"),g={};e.forEach(d=>{d.data&&d.data.variable&&(g[d.data.variable]=d.data.default_value||"")}),v.value=g,C.value.show()},P=()=>{k.value&&(x.value=!0,router.post(route("workflows.execute",k.value.id),{input_data:v.value},{onSuccess:o=>{C.value.hide(),x.value=!1,o.props.execution_id&&router.get(route("executions.status",o.props.execution_id))},onError:()=>{x.value=!1}}))};return F(()=>{E.value=new bootstrap.Modal(document.getElementById("modal-delete-workflow")),C.value=new bootstrap.Modal(document.getElementById("modal-execute-workflow"))}),(o,e)=>{const g=$("BasePageHeading"),d=$("BaseBlock"),D=R("click-ripple");return l(),a(y,null,[u(c(O),{title:"Workflows"}),u(g,{title:"Workflows",subtitle:"Build and automate your AI processes"},{extra:i(()=>[B((l(),I(c(b),{href:o.route("workflows.create"),class:"btn btn-alt-primary"},{default:i(()=>e[5]||(e[5]=[t("i",{class:"fa fa-plus opacity-50 me-1"},null,-1),t("span",null,"New Workflow",-1)])),_:1},8,["href"])),[[D]])]),_:1}),t("div",J,[t("div",L,[t("div",U,[u(d,{title:"Your Workflows","content-class":"p-0"},{options:i(()=>[t("div",z,[B((l(),I(c(b),{href:o.route("workflows.create"),class:"btn btn-sm btn-alt-primary"},{default:i(()=>e[6]||(e[6]=[t("i",{class:"fa fa-plus me-1"},null,-1),f(" Create ")])),_:1},8,["href"])),[[D]])])]),default:i(()=>[p.workflows.length===0?(l(),a("div",G,[t("div",K,[e[8]||(e[8]=t("i",{class:"fa fa-4x fa-diagram-project text-gray opacity-25 mb-3"},null,-1)),e[9]||(e[9]=t("p",{class:"fs-lg fw-medium text-gray-darker"},"You haven't created any workflows yet.",-1)),u(c(b),{href:o.route("workflows.create"),class:"btn btn-hero btn-primary mt-2"},{default:i(()=>e[7]||(e[7]=[t("i",{class:"fa fa-plus opacity-50 me-1"},null,-1),f(" Create Your First Workflow ")])),_:1},8,["href"])])])):(l(),a("div",Q,[t("div",X,[t("table",Z,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",{class:"d-none d-md-table-cell"},"Description"),t("th",{class:"text-center"},"Status"),t("th",{class:"d-none d-sm-table-cell text-center"},"Last Run"),t("th",{class:"text-center",style:{width:"150px"}},"Actions")])],-1)),t("tbody",null,[(l(!0),a(y,null,_(p.workflows,s=>(l(),a("tr",{key:s.id},[t("td",null,[u(c(b),{href:o.route("workflows.show",s.id),class:"fw-semibold"},{default:i(()=>[f(r(s.name),1)]),_:2},1032,["href"])]),t("td",tt,[t("div",et,r(s.description||"No description"),1)]),t("td",st,[t("div",ot,[t("input",{type:"checkbox",class:"form-check-input",id:`workflow-active-${s.id}`,checked:s.is_active,onChange:n=>o.router.put(o.route("workflows.update",s.id),{name:s.name,description:s.description,is_active:!s.is_active})},null,40,lt)])]),t("td",at,[t("span",nt,r(s.last_execution_at?W(s.last_execution_at):"Never"),1)]),t("td",it,[t("div",dt,[t("button",{type:"button",class:"btn btn-sm btn-alt-primary",onClick:n=>A(s),title:"Run"},e[10]||(e[10]=[t("i",{class:"fa fa-play"},null,-1)]),8,rt),u(c(b),{href:o.route("workflows.show",s.id),class:"btn btn-sm btn-alt-secondary",title:"View"},{default:i(()=>e[11]||(e[11]=[t("i",{class:"fa fa-eye"},null,-1)])),_:2},1032,["href"]),u(c(b),{href:o.route("workflows.edit",s.id),class:"btn btn-sm btn-alt-secondary",title:"Edit"},{default:i(()=>e[12]||(e[12]=[t("i",{class:"fa fa-pencil-alt"},null,-1)])),_:2},1032,["href"]),t("button",{type:"button",class:"btn btn-sm btn-alt-danger",onClick:n=>T(s),title:"Delete"},e[13]||(e[13]=[t("i",{class:"fa fa-times"},null,-1)]),8,ut)])])]))),128))])])])]))]),_:1})]),t("div",ct,[u(d,{title:"Recent Executions"},{options:i(()=>[t("button",{type:"button",class:"btn-block-option",onClick:e[0]||(e[0]=s=>o.router.reload({only:["recentExecutions"]})),title:"Refresh"},e[15]||(e[15]=[t("i",{class:"fa fa-sync"},null,-1)]))]),default:i(()=>[p.recentExecutions.length===0?(l(),a("div",ft,e[16]||(e[16]=[t("i",{class:"fa fa-history fa-3x text-muted mb-3"},null,-1),t("p",{class:"fs-sm text-muted"},"No recent executions",-1)]))):(l(),a("div",mt,[t("div",bt,[(l(!0),a(y,null,_(p.recentExecutions,s=>(l(),I(c(b),{key:s.id,href:o.route("executions.status",s.id),class:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},{default:i(()=>[t("div",null,[t("div",pt,r(s.workflow.name),1),t("div",vt,r(W(s.started_at)),1)]),t("span",{class:N(["fs-xs fw-semibold d-inline-block py-1 px-3 rounded-pill",M(s.status)])},r(s.status),3)]),_:2},1032,["href"]))),128))])]))]),_:1})])]),u(d,{title:"Import & Export"},{default:i(()=>{var s;return[t("div",wt,[t("div",kt,[e[20]||(e[20]=t("h4",{class:"h5 fw-medium"},"Export Workflow",-1)),e[21]||(e[21]=t("p",{class:"text-muted fs-sm"},"Export your workflows to share with others or use as backups.",-1)),p.workflows.length>0?(l(),a("div",yt,[t("div",ht,[t("select",xt,[e[17]||(e[17]=t("option",{value:""},"Select a workflow to export",-1)),(l(!0),a(y,null,_(p.workflows,n=>(l(),a("option",{key:n.id,value:n.id},r(n.name),9,gt))),128))]),t("button",{class:"btn btn-alt-primary",type:"button",onClick:e[1]||(e[1]=n=>o.router.get(o.route("workflows.export",o.document.getElementById("workflow-export").value))),disabled:!((s=o.document.getElementById("workflow-export"))!=null&&s.value)},e[18]||(e[18]=[t("i",{class:"fa fa-download me-1"},null,-1),f(" Export ")]),8,_t)])])):(l(),a("div",Et,e[19]||(e[19]=[t("div",{class:"alert alert-info d-flex"},[t("div",{class:"flex-shrink-0"},[t("i",{class:"fa fa-info-circle fa-fw"})]),t("div",{class:"ms-2"}," No workflows available for export. Create a workflow first. ")],-1)])))]),t("div",Ct,[e[23]||(e[23]=t("h4",{class:"h5 fw-medium"},"Import Workflow",-1)),e[24]||(e[24]=t("p",{class:"text-muted fs-sm"},"Import workflows from JSON files to quickly set up your automations.",-1)),t("form",{onSubmit:e[2]||(e[2]=Y(n=>o.router.post(o.route("workflows.import"),{workflow_data:o.document.getElementById("workflow-import-data").value}),["prevent"]))},e[22]||(e[22]=[t("div",{class:"mb-4"},[t("textarea",{id:"workflow-import-data",class:"form-control",rows:"3",placeholder:"Paste workflow JSON data here",required:""})],-1),t("button",{type:"submit",class:"btn btn-alt-primary"},[t("i",{class:"fa fa-upload me-1"}),f(" Import ")],-1)]),32)])])]}),_:1})]),t("div",Bt,[t("div",It,[t("div",Nt,[t("div",Wt,[e[29]||(e[29]=S('<div class="block-header bg-danger"><h3 class="block-title">Delete Workflow</h3><div class="block-options"><button type="button" class="btn-block-option" data-bs-dismiss="modal" aria-label="Close"><i class="fa fa-fw fa-times"></i></button></div></div>',1)),t("div",Dt,[e[25]||(e[25]=t("p",null,"Are you sure you want to delete this workflow?",-1)),w.value?(l(),a("p",$t,r(w.value.name),1)):V("",!0),e[26]||(e[26]=t("p",{class:"text-danger"},[t("i",{class:"fa fa-exclamation-triangle me-1"}),f(" This action cannot be undone. The workflow and all its execution history will be permanently deleted. ")],-1))]),t("div",St,[e[28]||(e[28]=t("button",{type:"button",class:"btn btn-sm btn-alt-secondary me-1","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:N(["btn btn-sm btn-danger",{disabled:h.value}]),onClick:e[3]||(e[3]=s=>q())},e[27]||(e[27]=[t("i",{class:"fa fa-fw fa-trash opacity-50 me-1"},null,-1),f(" Delete Workflow ")]),2)])])])])]),t("div",Vt,[t("div",Mt,[t("div",Tt,[t("div",qt,[e[34]||(e[34]=S('<div class="block-header bg-primary"><h3 class="block-title">Execute Workflow</h3><div class="block-options"><button type="button" class="btn-block-option" data-bs-dismiss="modal" aria-label="Close"><i class="fa fa-fw fa-times"></i></button></div></div>',1)),t("div",At,[k.value?(l(),a("p",Pt,r(k.value.name),1)):V("",!0),Object.keys(v.value).length>0?(l(),a("div",jt,[e[30]||(e[30]=t("h5",{class:"h6"},"Input Variables",-1)),(l(!0),a(y,null,_(v.value,(s,n)=>(l(),a("div",{key:n,class:"mb-4"},[t("label",{class:"form-label",for:`input-${n}`},r(n),9,Ft),B(t("textarea",{id:`input-${n}`,"onUpdate:modelValue":j=>v.value[n]=j,class:"form-control",rows:"2"},null,8,Rt),[[H,v.value[n]]])]))),128))])):(l(),a("div",Ot,e[31]||(e[31]=[t("p",{class:"text-muted"},"This workflow doesn't require any input variables.",-1)])))]),t("div",Yt,[e[33]||(e[33]=t("button",{type:"button",class:"btn btn-sm btn-alt-secondary me-1","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:N(["btn btn-sm btn-primary",{disabled:x.value}]),onClick:e[4]||(e[4]=s=>P())},e[32]||(e[32]=[t("i",{class:"fa fa-fw fa-play opacity-50 me-1"},null,-1),f(" Execute ")]),2)])])])])])],64)}}};export{Jt as default};
