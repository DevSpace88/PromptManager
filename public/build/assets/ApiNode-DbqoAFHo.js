import{r as U,c as d,d as i,e as f,f as e,u as w,t as r,q as v,g as b,n as y,v as $,F as k,h as C,l as h}from"./app-DVK38B9a.js";import{u as j,d as V}from"./vue-flow-core-5G_7kKqb.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"api-node-content"},O={class:"api-node-header"},R={class:"api-node-label"},q=["title"],A={key:0,class:"api-node-settings"},E={class:"setting-group"},L={class:"setting-option"},M={class:"setting-help"},P={class:"setting-group"},D={class:"setting-option"},F=["value"],I={class:"setting-group"},z={class:"setting-option"},G={class:"api-headers-list"},J={class:"api-header-key"},Q={class:"api-header-value"},W=["onClick"],X={key:0,class:"api-no-headers"},Y={class:"setting-option mt-1"},Z={class:"row g-1"},_={class:"col-5"},ee={class:"col-5"},te={class:"col-2"},se=["disabled"],ae={class:"setting-group"},oe={class:"setting-option mb-1"},ne={class:"btn-group btn-group-sm w-100"},le={class:"setting-option"},de={class:"setting-help"},ie={class:"setting-group"},re={class:"setting-option"},ue={key:1,class:"api-node-summary"},ce={class:"api-method-url"},ve={class:"api-url"},be={class:"api-details"},me={key:0,class:"api-header-count"},ye={key:1,class:"api-output-var"},ge={__name:"ApiNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnectable:{type:Boolean,default:!0}},setup(s){const u=s,{findNode:H,setNodes:T}=j(),o=U({showSettings:!1,bodyType:u.data.bodyType||"json",newHeaderKey:"",newHeaderValue:"",availableMethods:["GET","POST","PUT","PATCH","DELETE"]}),S=()=>{o.value.showSettings=!o.value.showSettings},l=(n,t)=>{const c=H(u.id);if(!c)return;const a={...c,data:{...c.data,[n]:t}};T(m=>m.map(p=>p.id===u.id?a:p))},x=()=>{if(!o.value.newHeaderKey)return;const n={...u.data.headers||{}};n[o.value.newHeaderKey]=o.value.newHeaderValue,l("headers",n),o.value.newHeaderKey="",o.value.newHeaderValue=""},N=n=>{const t={...u.data.headers||{}};delete t[n],l("headers",t)},g=n=>{o.value.bodyType=n,l("bodyType",n),u.data.body||(n==="json"?l("body","{}"):n==="form"?l("body",{}):l("body",""))};return(n,t)=>{var c;return i(),d("div",{class:v(["api-node",{selected:s.selected}])},[f(w(V),{type:"target",position:"top",id:s.id+"-target",connectable:s.isConnectable},null,8,["id","connectable"]),f(w(V),{type:"source",position:"bottom",id:s.id+"-source",connectable:s.isConnectable},null,8,["id","connectable"]),e("div",B,[e("div",O,[t[13]||(t[13]=e("i",{class:"fa fa-globe text-danger me-1"},null,-1)),e("span",R,r(s.data.label),1),e("button",{type:"button",class:"api-node-toggle",onClick:S,title:o.value.showSettings?"Hide settings":"Show settings"},[e("i",{class:v(["fa",o.value.showSettings?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,q)]),o.value.showSettings?(i(),d("div",A,[e("div",E,[t[14]||(t[14]=e("label",{class:"setting-label"},"URL",-1)),e("div",L,[b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=a=>s.data.url=a),placeholder:"https://api.example.com/endpoint",onChange:t[1]||(t[1]=a=>l("url",s.data.url))},null,544),[[y,s.data.url]])]),e("div",M,"API endpoint URL. Use "+r(n.variable)+" for dynamic values.",1)]),e("div",P,[t[15]||(t[15]=e("label",{class:"setting-label"},"Method",-1)),e("div",D,[b(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[2]||(t[2]=a=>s.data.method=a),onChange:t[3]||(t[3]=a=>l("method",s.data.method))},[(i(!0),d(k,null,C(o.value.availableMethods,a=>(i(),d("option",{key:a,value:a},r(a),9,F))),128))],544),[[$,s.data.method]])])]),e("div",I,[t[18]||(t[18]=e("label",{class:"setting-label"},"Headers",-1)),e("div",z,[e("div",G,[(i(!0),d(k,null,C(s.data.headers,(a,m)=>(i(),d("div",{key:m,class:"api-header-item"},[e("span",J,r(m),1),e("span",Q,r(a),1),e("button",{type:"button",class:"api-header-remove",onClick:p=>N(m),title:"Remove header"},t[16]||(t[16]=[e("i",{class:"fa fa-times"},null,-1)]),8,W)]))),128)),!s.data.headers||Object.keys(s.data.headers).length===0?(i(),d("div",X," No headers defined ")):h("",!0)])]),e("div",Y,[e("div",Z,[e("div",_,[b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[4]||(t[4]=a=>o.value.newHeaderKey=a),placeholder:"Key"},null,512),[[y,o.value.newHeaderKey]])]),e("div",ee,[b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[5]||(t[5]=a=>o.value.newHeaderValue=a),placeholder:"Value"},null,512),[[y,o.value.newHeaderValue]])]),e("div",te,[e("button",{type:"button",class:"btn btn-sm btn-outline-secondary w-100",onClick:x,disabled:!o.value.newHeaderKey},t[17]||(t[17]=[e("i",{class:"fa fa-plus"},null,-1)]),8,se)])])])]),e("div",ae,[t[19]||(t[19]=e("label",{class:"setting-label"},"Body",-1)),e("div",oe,[e("div",ne,[e("button",{type:"button",class:v(["btn",o.value.bodyType==="json"?"btn-danger":"btn-outline-secondary"]),onClick:t[6]||(t[6]=a=>g("json"))}," JSON ",2),e("button",{type:"button",class:v(["btn",o.value.bodyType==="text"?"btn-danger":"btn-outline-secondary"]),onClick:t[7]||(t[7]=a=>g("text"))}," Text ",2),e("button",{type:"button",class:v(["btn",o.value.bodyType==="form"?"btn-danger":"btn-outline-secondary"]),onClick:t[8]||(t[8]=a=>g("form"))}," Form ",2)])]),e("div",le,[b(e("textarea",{class:"form-control form-control-sm","onUpdate:modelValue":t[9]||(t[9]=a=>s.data.body=a),rows:"3",placeholder:"Request body",onChange:t[10]||(t[10]=a=>l("body",s.data.body))},null,544),[[y,s.data.body]])]),e("div",de,"Request body. Use "+r(n.variable)+" for dynamic values.",1)]),e("div",ie,[t[20]||(t[20]=e("label",{class:"setting-label"},"Save Response To",-1)),e("div",re,[b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[11]||(t[11]=a=>s.data.output_variable=a),placeholder:"Variable name",onChange:t[12]||(t[12]=a=>l("output_variable",s.data.output_variable))},null,544),[[y,s.data.output_variable]])]),t[21]||(t[21]=e("div",{class:"setting-help"},"Variable to store the API response",-1))])])):(i(),d("div",ue,[e("div",ce,[e("span",{class:v(["api-method",`method-${(c=s.data.method)==null?void 0:c.toLowerCase()}`])},r(s.data.method),3),e("span",ve,r(s.data.url),1)]),e("div",be,[s.data.headers&&Object.keys(s.data.headers).length>0?(i(),d("span",me,r(Object.keys(s.data.headers).length)+" headers",1)):h("",!0),s.data.output_variable?(i(),d("span",ye,"â†’ "+r(s.data.output_variable),1)):h("",!0)])]))])],2)}}},we=K(ge,[["__scopeId","data-v-9fcd8a7c"]]);export{we as default};
